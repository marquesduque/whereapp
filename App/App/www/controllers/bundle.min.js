function openCam(){navigator.camera.getPicture(onSuc,onFai,{quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,targetWidth:500,targetHeight:500,PopoverArrowDirection:1})}function openLibra(){navigator.camera.getPicture(onSuc,onFai,{destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0,PopoverArrowDirection:1})}function onSuc(n){$("#foto").css("background-image","url(data:image/jpeg;base64,"+n+")");$(".photo").val(n);$(".photo_itype").val("data:image/jpeg;base64")}function onFai(n){console.log("Failed because: "+n)}function validarCPF(n){if((n=n.replace(/[^\d]+/g,""),n=="")||n.length!=11||n=="00000000000"||n=="11111111111"||n=="22222222222"||n=="33333333333"||n=="44444444444"||n=="55555555555"||n=="66666666666"||n=="77777777777"||n=="88888888888"||n=="99999999999")return!1;for(add=0,i=0;i<9;i++)add+=parseInt(n.charAt(i))*(10-i);if(rev=11-add%11,(rev==10||rev==11)&&(rev=0),rev!=parseInt(n.charAt(9)))return!1;for(add=0,i=0;i<10;i++)add+=parseInt(n.charAt(i))*(11-i);return(rev=11-add%11,(rev==10||rev==11)&&(rev=0),rev!=parseInt(n.charAt(10)))?!1:!0}function openCamera(){navigator.camera.getPicture(onSulpess,onFail,{quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,targetWidth:500,targetHeight:500,PopoverArrowDirection:1})}function openLibrary(){navigator.camera.getPicture(onSulpess,onFail,{destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0,PopoverArrowDirection:1})}function onSulpess(n){$("#foto_usuario").css("background-image","url(data:image/jpeg;base64,"+n+")");$("#foto_str").val(n);$("#foto_itype").val("data:image/jpeg;base64")}function onFail(n){console.log("Failed because: "+n)}function convidar(){myApp.closeModal(".modal");myApp.prompt("Insira o email para enviarmos o convite!","",function(n){n==""?myApp.alert("Digite o email do usuario que quer convidar","Aviso!"):creait.post("convite?email="+n+"&grupo_id="+localStorage.getItem("grupo_id")+"&pessoa_id="+controller.login.get().id,null,function(n){n==0?myApp.alert("E-mail não cadastrado no sistema","Aviso!"):n==1?myApp.alert("Esta pessoa já faz parte do grupo","Aviso!"):myApp.alert("Convite enviado com sucesso!","Aviso!")})},function(){})}function validarCPF(n){if((n=n.replace(/[^\d]+/g,""),n=="")||n.length!=11||n=="00000000000"||n=="11111111111"||n=="22222222222"||n=="33333333333"||n=="44444444444"||n=="55555555555"||n=="66666666666"||n=="77777777777"||n=="88888888888"||n=="99999999999")return!1;for(add=0,i=0;i<9;i++)add+=parseInt(n.charAt(i))*(10-i);if(rev=11-add%11,(rev==10||rev==11)&&(rev=0),rev!=parseInt(n.charAt(9)))return!1;for(add=0,i=0;i<10;i++)add+=parseInt(n.charAt(i))*(11-i);return(rev=11-add%11,(rev==10||rev==11)&&(rev=0),rev!=parseInt(n.charAt(10)))?!1:!0}function openCamera(){navigator.camera.getPicture(onSulpess,onFail,{quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,targetWidth:500,targetHeight:500,PopoverArrowDirection:1})}function openLibrary(){navigator.camera.getPicture(onSulpess,onFail,{destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0,PopoverArrowDirection:1})}function onSulpess(n){$("#foto_usuario").css("background-image","url(data:image/jpeg;base64,"+n+")");$("#foto_str").val(n);$("#foto_itype").val("data:image/jpeg;base64")}function onFail(n){console.log("Failed because: "+n)}controller.confirma_compra={init:function(n){n({},function(){})},get:function(){return window.localStorage.confirma_compra==null?null:JSON.parse(window.localStorage.confirma_compra)},set:function(n){window.localStorage.confirma_compra=JSON.stringify(n)}};controller.endereco_entrega={init:function(n){n({},function(){$(".endereco_entrega").click(function(){$(this).attr("valor")==0?($("#endereco_novo").css("display","block"),$("#estado").val(controller.login.get().estado),$("#cidade").val(controller.login.get().cidade),$("#bairro").val(controller.login.get().bairro),$("#rua").val(controller.login.get().rua),$("#numero").val(controller.login.get().numero),$("#cep").val(controller.login.get().cep),$("#complemento").val(controller.login.get().complemento)):$(this).attr("valor")==1?($("#endereco_novo").css("display","block"),$("#estado").val(""),$("#cidade").val(""),$("#bairro").val(""),$("#rua").val(""),$("#numero").val(""),$("#cep").val(""),$("#complemento").val("")):$("#endereco_novo").css("display","none")});$("#ir_forma_pagamento").click(function(){var n=controller.carrinho.get();if($("#endereco_novo").css("display")=="block"){if($("#rua").val()==""){myApp.alert("Informe a rua","");return}if($("#numero").val()==""){myApp.alert("Informe o numero","");return}if($("#complemento").val()==""){myApp.alert("Informe o complemento","");return}if($("#bairro").val()==""){myApp.alert("Informe o bairro","");return}if($("#cep").val()==""){myApp.alert("Imforme o CEP","");return}if($("#cidade").val()==""){myApp.alert("Informe a cidade","");return}if($("#estado").val()==""){myApp.alert("Informe o estado","");return}n.endereco_bool=1;n.rua_entrega=$("#rua").val();n.numero_entrega=$("#numero").val();n.complemento_entrega=$("#complemento").val();n.bairro_entrega=$("#bairro").val();n.cep_entrega=$("#cep").val().replace("-","");n.cidade_entrega=$("#cidade").val();n.estado_entrega=$("#estado").val()}controller.carrinho.set(n);creait.redirect("forma_pagamento")})})},get:function(){return window.localStorage.endereco_entrega==null?null:JSON.parse(window.localStorage.endereco_entrega)},set:function(n){window.localStorage.endereco_entrega=JSON.stringify(n)}};controller.detalhe_padrinho={init:function(n){n(controller.detalhe_padrinho.get(),function(){$("#btn_apadrinhar").click(function(){creait.redirect("adesao")})})},get:function(){return window.localStorage.detalhe_padrinho==null?null:JSON.parse(window.localStorage.detalhe_padrinho)},set:function(n){window.localStorage.detalhe_padrinho=JSON.stringify(n)}};controller.addgrupo={init:function(n){n({},function(){$("#pessoa_id").val(controller.login.get().id);$("#btn_salvar_grupo").click(function(){$("#nome_grupo").toggleInputError($("#nome_grupo").val()=="","Digite alguma obersarvação/descriçao");$("#descricao_grupo").toggleInputError($("#descricao_grupo").val()=="","Digite alguma obersarvação/descrição");$("#grupo").length==0&&creait.post("grupo",myApp.formToJSON("#grupo"),function(n){var t=controller.login.get();t.grupos.push(n);controller.login.set(t);creait.redirect("grupo")})})})},get:function(){return window.localStorage.addgrupo==null?null:JSON.parse(window.localStorage.addgrupo)},set:function(n){window.localStorage.addgrupo=JSON.stringify(n)}};controller.addItem={init:function(n){n({},function(){$(".responsavel_id").val(controller.login.get().id);$("#foto").click(function(){myApp.alert("<div style='color:#2196f3; text-align:left; font-size:20px;' onclick='openCam(); myApp.closeModal(\".modal\");'>Tirar Foto<\/div><div style='color:#2196f3; text-align:left; font-size:20px;' onclick='openLibra(); myApp.closeModal(\".modal\");'>Escolher da Biblioteca<\/div>","Escolha uma das opções a baixo!")});$("#tipoI").html('<option value="" selected=""><\/option><option value="1">Pessoa<\/option><option value="2">Animal<\/option><option value="3">Objeto<\/option><option value="4">Veiculo<\/option><option value="5">Carga<\/option><option value="6" selected="">Outros<\/option>');$("#tipoI").on("change",function(){$("form").css("display","none");$("#"+$("#tipoI").val()).css("display","block");$(".tipo_id").val($("#tipoI").val())});$("#btn_cadastra_item").click(function(){if($("[name='doacao']").val($("[name='doacao_slc']:checked").val()),$("[name='apadrinhar']").val($("[name='apadrinhar_slc']:checked").val()),$("#tipoI").val()==1){if($("#nome_1").toggleInputError($("#nome_1").val()=="","Informe o nome"),$("#rg_1").toggleInputError($("#rg_1").val()=="","Informe o RG"),$("#nasc_1").toggleInputError($("#nasc_1").val()=="","Informe o Data de Nascimento"),$("#desc_1").toggleInputError($("#desc_1").val()=="","Digite alguma observação"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==2){if($("#nome_2").toggleInputError($("#nome_2").val()=="","Informe o nome"),$("#cor_2").toggleInputError($("#cor_2").val()=="","Informe a Cor"),$("#raca_2").toggleInputError($("#raca_2").val()=="","Informe a raça"),$("#desc_2").toggleInputError($("#desc_2").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==3){if($("#nome_3").toggleInputError($("#nome_3").val()=="","Informe o nome"),$("#fabri_3").toggleInputError($("#fabri_3").val()=="","Informe o fabricante"),$("#marca_3").toggleInputError($("#marca_3").val()=="","Informe a marca"),$("#cor_3").toggleInputError($("#cor_3").val()=="","Informe a cor"),$("#desc_3").toggleInputError($("#desc_3").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==4){if($("#nome_4").toggleInputError($("#nome_4").val()=="","Informe a Placa"),$("#fabri_4").toggleInputError($("#fabri_4").val()=="","Informe o fabricante"),$("#marca_4").toggleInputError($("#marca_4").val()=="","Informe a marca"),$("#cor_4").toggleInputError($("#cor_4").val()=="","Informe a cor"),$("#modelo_4").toggleInputError($("#modelo_4").val()=="","Informe o modelo"),$("#desc_4").toggleInputError($("#desc_4").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==5){if($("#nome_5").toggleInputError($("#nome_5").val()=="","Informe o seu nome"),$("#desc_5").toggleInputError($("#desc_5").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==6){if($("#nome_6").toggleInputError($("#nome_6").val()=="","Informe o seu nome"),$("#desc_6").toggleInputError($("#desc_6").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else{myApp.alert("Selecione um item","");return}creait.post("item",myApp.formToJSON("#"+$("#tipoI").val()),function(n){var t=controller.login.get();t.meusitens.push(n.itens[0]);controller.login.set(t);creait.redirect("meuItem")})})})},get:function(){return window.localStorage.addItem==null?null:JSON.parse(window.localStorage.addItem)},set:function(n){window.localStorage.addItem=JSON.stringify(n)}};controller.additemgrupo={init:function(n){n(controller.login.get(),function(){$("#btn_cadastra_item_grupo").click(function(){var n="";$(".itens").each(function(t){$(".itens")[t].checked==!0&&(n+="&item_id="+$($(".itens")[t]).val())});creait.post("item?grupo_id="+localStorage.getItem("grupo_id")+n,null,function(n){for(var t=controller.login.get(),i=0;i<t.grupos.length;i++)if(t.grupos[i].id==localStorage.getItem("grupo_id")){t.grupos[i].itens.push(n);controller.login.set(t);break}creait.redirect("grupo_item")})})})},get:function(){return window.localStorage.additemgrupo==null?null:JSON.parse(window.localStorage.additemgrupo)},set:function(n){window.localStorage.additemgrupo=JSON.stringify(n)}};controller.adicionar={init:function(n){n(controller.adicionar.get(),function(){$(".menos_adicionar").click(function(){if($("#qtde_adicionar").html()>1){var n=controller.adicionar.get(),t=parseInt($("#qtde_adicionar").html())-1;$("#qtde_adicionar").html(t);n.estoque=parseInt(n.estoque)+1;controller.adicionar.set(n)}});$(".mais_adicionar").click(function(){if($("#qtde_adicionar").html()==controller.adicionar.get().estoque)myApp.alert("Quantidade maxima de produtos em estoque atingido","...");else{var n=controller.adicionar.get(),t=parseInt($("#qtde_adicionar").html())+1;$("#qtde_adicionar").html(t);n.estoque=parseInt(n.estoque)-1;controller.adicionar.set(n)}});$("#btn_adicionar").click(function(){var n=controller.carrinho.get(),i=controller.adicionar.get(),r,t,u;if(i.estoque==0)myApp.alert("Este produto está fora de estoque.","");else{if(i.estoque=parseInt(i.estoque)-parseInt($("#qtde_adicionar").html()),controller.adicionar.set(i),n==null)r={valor_total:parseFloat(controller.adicionar.get().valor)*parseFloat($("#qtde_adicionar").html()),loja_id:controller.adicionar.get().responsavel_id,endereco_bool:0,rua_entrega:"",numero_entrega:"",complemento_entrega:"",bairro_entrega:"",cep_entrega:"",cidade_entrega:"",estado_entrega:"",itens:[{id:controller.adicionar.get().id,nome:controller.adicionar.get().nome,qtde:parseInt($("#qtde_adicionar").html()),descricao:controller.adicionar.get().descricao,valor:controller.adicionar.get().valor}]},r.valor_total=r.valor_total.toFixed(2),controller.carrinho.set(r),myApp.alert("Item adicionado com sucesso!","...");else{for(n.valor_total=parseFloat(controller.adicionar.get().valor)*parseFloat($("#qtde_adicionar").html())+parseFloat(n.valor_total),n.valor_total=n.valor_total.toFixed(2),t=0;t<=n.itens.length;t++)if(t==n.itens.length){n.itens.push({id:controller.adicionar.get().id,nome:controller.adicionar.get().nome,qtde:parseInt($("#qtde_adicionar").html()),descricao:controller.adicionar.get().descricao,valor:controller.adicionar.get().valor,foto:controller.adicionar.get().foto,foto_itype:controller.adicionar.get().foto_itype});break}else if(n.itens[t].id==controller.adicionar.get().id){u=parseInt(n.itens[t].qtde)+parseInt($("#qtde_adicionar").html());n.itens[t].qtde=u;break}controller.carrinho.set(n);myApp.alert("Item adicionado com sucesso!","...")}$("#div_carrinho").css("display","block");$(".views").addClass("carrinho")}})})},get:function(){return window.localStorage.adicionar==null?null:JSON.parse(window.localStorage.adicionar)},set:function(n){window.localStorage.adicionar=JSON.stringify(n)}};controller.cadastrarRastreador={init:function(n){n({},function(){var n=myApp.picker({input:"#picker_item",rotateEffect:!0,cols:[{values:["Item 1","Item 2","Item 3","Item 4","Item 5"]}],toolbarTemplate:'<div class = "toolbar"><div class = "toolbar-inner"><div class = "left"><a href = "#" class = "link close-picker" onclick="creait.redirect(\'addItem\')">Cadastrar Item<\/a><\/div><div class = "center"><\/div><div class = ""><a href = "#" class = "link close-picker">Done<\/a><\/div><\/div><\/div>',onClose:function(){},onOpen:function(){}});$("#picker_item").click(function(){n.open()})})},get:function(){return window.localStorage.cadastrarRastreador==null?null:JSON.parse(window.localStorage.cadastrarRastreador)},set:function(n){window.localStorage.cadastrarRastreador=JSON.stringify(n)}};controller.cadastro={init:function(n){n({},function(){$("#foto_usuario").click(function(){myApp.alert("<div style='color:#2196f3; text-align:left; font-size:20px;' onclick='openCamera(); myApp.closeModal(\".modal\");'>Tirar Foto<\/div><div style='color:#2196f3; text-align:left; font-size:20px;' onclick='openLibrary(); myApp.closeModal(\".modal\");'>Escolher da Biblioteca<\/div>","Escolha uma das opções a baixo!")});var n=myApp.picker({input:"#picker_estados",rotateEffect:!0,cols:[{values:["","AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"]}],toolbarTemplate:'<div class = "toolbar"><div class = "toolbar-inner"><div class = "left"><a href = "#" class = "link close-picker"><\/a><\/div><div class = "center"><\/div><div class = ""><a href = "#" class = "link close-picker">Done<\/a><\/div><\/div><\/div>',onClose:function(){},onOpen:function(){}});$("#picker_estados").click(function(){n.open()});$$("#btn_sign_up").click(function(){$("#nome_input").toggleInputError($("#nome_input").val()=="","Informe o seu nome");$("#rg_input").toggleInputError($("#rg_input").val()=="","Informe o seu RG");$("#celular_input").toggleInputError($("#celular_input").val()=="","Informe o seu Celular");$("#dataN_input").toggleInputError($("#dataN_input").val()=="","Informe a sua Data de Nascimento");$("#email_input").toggleInputError($("#email_input").val()==""||!creait.isEmail($("#email_input").val()),"Email inválido");$("#password_input").toggleInputError($("#nome_input").val()==""||$("#password_input").val().length<6,"A senha deve ter no minimo 6 caracteres");$("#password_confirmar_input").toggleInputError($("#password_input").val()!=$("#password_confirmar_input").val(),"A confirmação da senha esta errada");$("#cpf_input").toggleInputError($("#cpf_input").val()=="","Informe o seu CPF");$("#cpf_input").toggleInputError(validarCPF($("#cpf_input").val())==!1,"CPF Inválido");$("#cep_input").toggleInputError(validarCPF($("#cep_input").val())==!1,"Informe o seu CEP");$("#pais_input").toggleInputError(validarCPF($("#pais_input").val())==!1,"Informe o pais");$("#picker_estados").toggleInputError(validarCPF($("#picker_estados").val())==!1,"Selecione um estado");$("#cidade").toggleInputError(validarCPF($("#cidade").val())==!1,"Informe a cidade");$("#bairro_input").toggleInputError(validarCPF($("#bairro_input").val())==!1,"Informe o bairro");$("#rua_input").toggleInputError(validarCPF($("#rua_input").val())==!1,"Informe a rua");$("#numero_input").toggleInputError(validarCPF($("#numero_input").val())==!1,"Informe o numero");$("#pushC").val(pushToken);$("#platC").val(plataforma);$("formcadastro .has-error").length==0&&($("#complemento_input").val()==""?$("#complemento_input").val("nt"):$("#complemento_input").val(),creait.post("pessoas",myApp.formToJSON("formcadastro"),function(n){n.erro==null?(controller.login.set(n),creait.redirect("categoria")):(myApp.alert(n.erro,"Atenção"),creait.loader(!1))}))})})}};controller.carrinho={init:function(n){n(controller.carrinho.get(),function(){$(".views").removeClass("carrinho");$("#div_carrinho").css("display","none");$("#excluir_item").click(function(){myApp.params.modalButtonOk="Sim";myApp.params.modalButtonCancel="Não";var n=$(this).attr("item_id");myApp.confirm("Deseja excluir item do carrinho?","",function(){var i,t;for(myApp.params.modalButtonOk="Ok",myApp.params.modalButtonCancel="Cancelar",i=0;i<controller.carrinho.get().itens.length;i++)if(n==controller.carrinho.get().itens[i].id)if(t=controller.carrinho.get(),t.itens.splice(i,1),t.itens.length==0)controller.carrinho.set(null),creait.redirect("categoria");else{t.valor_total=t.valor_total-t.itens[i].valor*t.itens[i].qtde;controller.carrinho.set(t);myApp.views[0].router.refreshPage();break}},function(){myApp.params.modalButtonOk="Ok";myApp.params.modalButtonCancel="Cancelar"})});$("#avancar_compra").click(function(){creait.loader(!0);$$.ajax({url:"https://ws.pagseguro.uol.com.br/v2/sessions",method:"POST",dataType:"xml",data:{email:"diretoria@ifdcontroladoria.com.br",token:"336b2f7b-9402-4c70-809c-60f1dc9cc63e06442b8e48579505841f1a1a22f44a1ca278-4fa8-4b1b-a82b-fe8c77cbdbda"},asyc:!0,success:function(n){PagSeguroDirectPayment.setSessionId(n.split("<id>")[1].split("<\/id>")[0]);PagSeguroDirectPayment.getPaymentMethods({amount:parseFloat(controller.carrinho.get().total),success:function(n){controller.boleto.set(n.paymentMethods.BOLETO.options);controller.credito.set(n.paymentMethods.CREDIT_CARD.options);controller.debito.set(n.paymentMethods.ONLINE_DEBIT.options);creait.loader(!1);creait.redirect("endereco_entrega")},error:function(){creait.loader(!1);myApp.alert("Ocorreu um erro tente novamente mais tarde!","")},complete:function(){}})},error:function(){creait.loader(!1);myApp.alert("Ocorreu um erro tente novamente mais tarde!","")}})})})},get:function(){return window.localStorage.carrinho==null?null:JSON.parse(window.localStorage.carrinho)},set:function(n){window.localStorage.carrinho=JSON.stringify(n)}};controller.categoria={init:function(n){n({},function(){controller.login.get().num_notificacao>0?($("#num_notificacao").html(controller.login.get().num_notificacao),$("#num_notificacao").css("display","flex")):$("#num_notificacao").css("display","none");controller.carrinho.get()==null?($(".views").removeClass("carrinho"),$("#div_carrinho").css("display","none")):($(".views").addClass("carrinho"),$("#div_carrinho").css("display","block"));localStorage.getItem("segundo_plano")==undefined?(myApp.params.modalButtonOk="Sim",myApp.params.modalButtonCancel="Não",myApp.confirm("Deseja habilitar o app há rodar em segundo plano para rastrear seu celular? Obs.: Você pode alterar esse configuracão depois no menu.","",function(){cordova.plugins.backgroundMode.enable();localStorage.setItem("segundo_plano","0");myApp.params.modalButtonOk="Ok";myApp.params.modalButtonCancel="Cancelar"},function(){cordova.plugins.backgroundMode.disable();localStorage.setItem("segundo_plano","1");myApp.params.modalButtonOk="Ok";myApp.params.modalButtonCancel="Cancelar"})):localStorage.getItem("segundo_plano")=="0"?cordova.plugins.backgroundMode.enable():cordova.plugins.backgroundMode.disable()})},get:function(){return window.localStorage.categoria==null?null:JSON.parse(window.localStorage.categoria)},set:function(n){window.localStorage.categoria=JSON.stringify(n)}};controller.contato_doador={init:function(n){n(controller.contato_doador.get(),function(){$("#btn_adotar").click(function(){myApp.params.modalButtonOk="Sim";myApp.params.modalButtonCancel="Não";myApp.confirm("Para que a adoção seja confirmada, seus dados para contato serão compartilhados com o doador!","Deseja finalizar?",function(){creait.post("doacao?pessoa_id="+controller.contato_doador.get().id_doador+"&doador_id="+$(this).attr("doador_id")+"&item_id="+$(this).attr("item_id"),null,function(){creait.loader(!1);myApp.alert("Dados compartilhados com sucesso, agorqa é só aguardar o doador entrar em contato!","");creait.redirect("categoria")});myApp.params.modalButtonOk="Ok";myApp.params.modalButtonCancel="Cancelar"},function(){myApp.params.modalButtonOk="Ok";myApp.params.modalButtonCancel="Cancelar"})})})},get:function(){return window.localStorage.contato_doador==null?null:JSON.parse(window.localStorage.contato_doador)},set:function(n){window.localStorage.contato_doador=JSON.stringify(n)}};controller.doacao={init:function(n){creait.get("doacao?pessoa_id="+controller.login.get().id,null,function(t){n(t,function(){$("#div_carrinho").css("display","none")})})},get:function(){return window.localStorage.doacao==null?null:JSON.parse(window.localStorage.doacao)},set:function(n){window.localStorage.doacao=JSON.stringify(n)}};controller.forma_pagamento={init:function(n){n({},function(){$("#pagar_cc_fp").click(function(){$("#pagamento_cc_fp").css("display","block");$("#pagamento_b_fp").css("display","none");$("#pagar_cc1_fp").css("background-color","#CCCCCC");$("#pagar_b1_fp").css("background-color","#FFFFFF")});$("#pagar_b_fp").click(function(){$("#pagamento_b_fp").css("display","block");$("#pagamento_cc_fp").css("display","none");$("#pagar_b1_fp").css("background-color","#CCCCCC");$("#pagar_cc1_fp").css("background-color","#FFFFFF")});var n=myApp.picker({input:"#estado_cobranca_fp",rotateEffect:!0,cols:[{values:["","AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"]}],toolbarTemplate:'<div class = "toolbar"><div class = "toolbar-inner"><div class = "left"><a href = "#" class = "link close-picker"><\/a><\/div><div class = "center"><\/div><div class = ""><a href = "#" class = "link close-picker">Done<\/a><\/div><\/div><\/div>',onClose:function(){},onOpen:function(){}});$("#picker_estados").click(function(){n.open()});$("#num_cartao_fp").on("blur",function(){for(var t="",n=0;n<=5;n++)t+=$("#num_cartao_fp").val()[n];PagSeguroDirectPayment.getBrand({cardBin:t,success:function(n){$("#img_bandeira_fp").attr("src","https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/42x20/"+n.brand.name+".png");$("#bandeira_fp").val(n.brand.name)},error:function(){},complete:function(){}})});$("#finalizar_cc_fp").click(function(){if($("#nome_cc_fp").toggleInputError($("#nome_cc_fp").val()=="","Informe o numero do cartao"),$("#cpf_cc_fp").toggleInputError($("#cpf_cc_fp").val()=="","Informe o numero do cartao"),$("#data_nasc_cc_fp").toggleInputError($("#data_nasc_cc_fp").val()=="","Informe o numero do cartao"),$("#telefone_cc_fp").toggleInputError($("#telefone_cc_fp").val()=="","Informe o numero do cartao"),$("#num_cartao_fp").toggleInputError($("#num_cartao_fp").val()=="","Informe o numero do cartao"),$("#cvv_fp").toggleInputError($("#cvv_fp").val()=="","Informe o numero do cartao"),$("#exp_date_fp").toggleInputError($("#exp_date_fp").val()=="","Informe o numero do cartao"),$("#cep_cobranca_fp").toggleInputError($("#cep_cobranca_fp").val()=="","Informe o numero do cartao"),$("#estado_cobranca_fp").toggleInputError($("#estado_cobranca_fp").val()=="","Informe o numero do cartao"),$("#cidade_cobranca_fp").toggleInputError($("#cidade_cobranca_fp").val()=="","Informe o numero do cartao"),$("#bairro_cobranca_fp").toggleInputError($("#bairro_cobranca_fp").val()=="","Informe o numero do cartao"),$("#rua_cobranca_fp").toggleInputError($("#rua_cobranca_fp").val()=="","Informe o numero do cartao"),$("#numero_cobranca_fp").toggleInputError($("#numero_cobranca_fp").val()=="","Informe o numero do cartao"),$("#complemento_cobranca_fp").toggleInputError($("#complemento_cobranca_fp").val()=="","Informe o numero do cartao"),$("formcc .has-error").length==0){creait.loader(!0);var n,t;PagSeguroDirectPayment.onSenderHashReady(function(i){if(i.status=="error"){creait.loader(!1);myApp.alert("Ocorreu um erro ao registrar o pagamento. Tente novamente mais tarde!","Aviso!");return}n=i.senderHash;PagSeguroDirectPayment.createCardToken({cardNumber:$("#num_cartao_fp").val(),brand:$("#bandeira_fp").val(),cvv:$("#cvv_fp").val(),expirationMonth:$("#exp_date_fp").val().split("/")[0],expirationYear:$("#exp_date_fp").val().split("/")[1],success:function(i){var r,s;t=i.card.token;var u="&",f="&shippingAddressRequired=false",e="",o="",h="false",c="true";for(controller.carrinho.get().endereco_bool=="1"&&(f="&shippingAddressRequired=true&shippingAddressStreet="+controller.carrinho.get().rua_entrega+"&shippingAddressNumber="+controller.carrinho.get().numero_entrega+"&shippingAddressComplement="+controller.carrinho.get().complemento_entrega+"&shippingAddressDistrict="+controller.carrinho.get().bairro_entrega+"&shippingAddressPostalCode="+controller.carrinho.get().cep_entrega+"&shippingAddressCity="+controller.carrinho.get().cidade_entrega+"&shippingAddressState="+controller.carrinho.get().estado_entrega+"&shippingAddressCountry=BRA&shippingType=1&shippingCost=0.00"),r=0;r<controller.carrinho.get().itens.length;r++)u+="itemId"+(r+1)+"="+controller.carrinho.get().itens[r].id+"&itemDescription"+(r+1)+"="+controller.carrinho.get().itens[r].nome+" - "+controller.carrinho.get().itens[r].descricao+"&itemAmount"+(r+1)+"="+controller.carrinho.get().itens[r].valor+"&itemQuantity"+(r+1)+"="+parseInt(controller.carrinho.get().itens[r].qtde)+"&",e+="&item_id="+controller.carrinho.get().itens[r].id,o+=controller.carrinho.get().itens[r].quantidade;s="paymentMode=default&paymentMethod=creditCard&currency=brl&extraAmount=0.00"+u+"senderName="+controller.login.get().nome+"&senderCpf="+controller.login.get().cpf.replace("-","").replace(".","").replace(".","")+"&senderAreaCode="+controller.login.get().telefone.split("(")[1].split(")")[0]+"&senderPhone="+controller.login.get().telefone.split(" ")[1].replace("-","")+"&senderEmail="+controller.login.get().email+"&senderHash="+n+f+"&creditCardToken="+t+"&installmentQuantity=1&installmentValue="+controller.carrinho.get().valor_total+"&noInterestInstallmentQuantity=2&&creditCardHolderName="+$("#nome_cc_fp").val()+"&creditCardHolderCPF="+$("#cpf_cc_fp").val().replace("-","").replace(".","").replace(".","")+"&creditCardHolderBirthDate="+$("#data_nasc_cc_fp").val()+"&creditCardHolderAreaCode="+$("#telefone_cc_fp").val().split("(")[1].split(")")[0]+"&creditCardHolderPhone="+$("#telefone_cc_fp").val().split(" ")[1].replace("-","")+"&billingAddressStreet="+$("#rua_cobranca_fp").val()+"&billingAddressNumber="+$("#numero_cobranca_fp").val()+"&billingAddressComplement="+$("#complemento_cobranca_fp").val()+"&billingAddressDistrict="+$("#bairro_cobranca_fp").val()+"&billingAddressPostalCode="+$("#cep_cobranca_fp").val()+"&billingAddressCity="+$("#cidade_cobranca_fp").val()+"&billingAddressState="+$("#estado_cobranca_fp").val()+"&billingAddressCountry=BRA";$.ajax({type:"post",url:"https://ws.pagseguro.uol.com.br/v2/transactions?email=diretoria@ifdcontroladoria.com.br&token=336b2f7b-9402-4c70-809c-60f1dc9cc63e06442b8e48579505841f1a1a22f44a1ca278-4fa8-4b1b-a82b-fe8c77cbdbda",headers:{"content-type":"application/x-www-form-urlencoded"},contenttype:"application/x-www-form-urlencoded; charset=utf-8",data:s,success:function(n){creait.post("compra?comprador_id="+controller.login.get().id+"&vendedor_id="+controller.carrinho.get().id+"&total="+controller.carrinho.get().valor_total+"&delivery="+h+"&balcao="+c+"&boleto_url="+$(n).find("paymentLink").html()+e+o,null,function(){creait.loader(!1);controller.carrinho.set(null);$("#div_carrinho").css("display","none");creait.redirect("confirma_compra")})},error:function(){creait.loader(!1);myApp.alert("Ocorreu um erro ao tentar finalizar a compra. Tente novamente mais tarde.","")}})},error:function(){creait.loader(!1);myApp.alert("Cartão de Crédito Inválido","Aviso!");return},complete:function(){}})})}});$("#finalizar_b_fp").click(function(){creait.loader(!0);var n;PagSeguroDirectPayment.onSenderHashReady(function(t){var i,h;if(t.status=="error"){creait.loader(!1);myApp.alert("Ocorreu um erro ao registrar o pagamento. Tente novamente mais tarde!","Aviso!");return}n=t.senderHash;var r="&",u="&shippingAddressRequired=false",f="",e="",o="false",s="true";for(controller.carrinho.get().endereco_bool=="1"&&(o="true",s="false",u="&shippingAddressRequired=true&shippingAddressStreet="+controller.carrinho.get().rua_entrega+"&shippingAddressNumber="+controller.carrinho.get().numero_entrega+"&shippingAddressComplement="+controller.carrinho.get().complemento_entrega+"&shippingAddressDistrict="+controller.carrinho.get().bairro_entrega+"&shippingAddressPostalCode="+controller.carrinho.get().cep_entrega+"&shippingAddressCity="+controller.carrinho.get().cidade_entrega+"&shippingAddressState="+controller.carrinho.get().estado_entrega+"&shippingAddressCountry=BRA&shippingType=1&shippingCost=0.00"),i=0;i<controller.carrinho.get().itens.length;i++)r+="itemId"+(i+1)+"="+controller.carrinho.get().itens[i].id+"&itemDescription"+(i+1)+"="+controller.carrinho.get().itens[i].nome+" - "+controller.carrinho.get().itens[i].descricao+"&itemAmount"+(i+1)+"="+parseFloat(controller.carrinho.get().itens[i].valor).toFixed(2)+"&itemQuantity"+(i+1)+"="+parseInt(controller.carrinho.get().itens[i].qtde)+"&",f+="&item_id="+controller.carrinho.get().itens[i].id,e+=controller.carrinho.get().itens[i].quantidade;h="paymentMode=default&paymentMethod=boleto&currency=BRL&extraAmount=0.00"+r+"senderName="+controller.login.get().nome+"&senderCPF="+controller.login.get().cpf.replace("-","").replace(".","").replace(".","")+"&senderAreaCode="+controller.login.get().telefone.split("(")[1].split(")")[0]+"&senderPhone="+controller.login.get().telefone.split(" ")[1].replace("-","")+"&senderEmail="+controller.login.get().email+"&senderHash="+n+u;$.ajax({type:"POST",url:"https://ws.pagseguro.uol.com.br/v2/transactions?email=diretoria@ifdcontroladoria.com.br&token=336b2f7b-9402-4c70-809c-60f1dc9cc63e06442b8e48579505841f1a1a22f44a1ca278-4fa8-4b1b-a82b-fe8c77cbdbda",headers:{"Content-Type":"application/x-www-form-urlencoded"},contentType:"application/x-www-form-urlencoded; charset=utf-8",data:h,success:function(n){creait.post("compra?comprador_id="+controller.login.get().id+"&vendedor_id="+controller.carrinho.get().loja_id+"&total="+controller.carrinho.get().valor_total+"&delivery="+o+"&balcao="+s+"&boleto_url="+$(n).find("paymentLink").html()+f+e,null,function(){creait.loader(!1);controller.carrinho.set(null);$("#div_carrinho").css("display","none");creait.redirect("confirma_compra")})},error:function(){creait.loader(!1);myApp.alert("Ocorreu um erro ao tentar finalizar a compra. Tente novamente mais tarde.","")}})})})})},get:function(){return window.localStorage.forma_pagamento==null?null:JSON.parse(window.localStorage.forma_pagamento)},set:function(n){window.localStorage.forma_pagamento=JSON.stringify(n)}};controller.grupo={init:function(n){n(controller.login.get(),function(){$(".opt_grupo").click(function(){localStorage.setItem("grupo_id",$(this).attr("grupo_id"));creait.redirect("grupo_item")});$(".sair_grupo").click(function(){creait.post("grupo?grupo_id="+$(this).attr("grupo_id")+"&pessoa_id="+controller.login.get().id,null,function(n){for(var i,t=0;t<controller.login.get().grupos.length;t++)if(controller.login.get().grupos[t].id==n){i=controller.login.get();i.grupos.splice(t,1);controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}})})})},get:function(){return window.localStorage.grupo==null?null:JSON.parse(window.localStorage.grupo)},set:function(n){window.localStorage.grupo=JSON.stringify(n)}};controller.grupo_item={init:function(n){creait.get("grupo?id="+localStorage.getItem("grupo_id")+"&pessoa_id="+controller.login.get().id,null,function(t){controller.grupo_item.set(t.convite);n(t,function(){$("a.perdido1").html("Encontrado");controller.grupo_item.get()==1?($("#aceitarrecusar").css("display","block"),$("#convidaitem").css("display","none")):($("#aceitarrecusar").css("display","none"),$("#convidaitem").css("display","block"));$("#qrgrupo").click(function(){cordova.plugins.barcodeScanner.encode(cordova.plugins.barcodeScanner.Encode.TEXT_TYPE,"grupo_"+$(this).attr("grupo_id"),function(n){alert("encode success: "+n)},function(n){alert("encoding failed: "+n)})});$("#aceitar").click(function(){creait.post("grupo?grupo_id="+localStorage.getItem("grupo_id")+"&pessoa_id="+controller.login.get().id+"&aceitar=a",null,function(){})});$("#recusar").click(function(){creait.post("grupo?grupo_id="+localStorage.getItem("grupo_id")+"&pessoa_id="+controller.login.get().id,null,function(n){for(var i,t=0;t<controller.login.get().grupos.length;t++)if(controller.login.get().grupos[t].id==n){i=controller.login.get();i.grupos.splice(t,1);controller.login.set(i);creait.redirect("grupo");creait.loader(!1);break}})});$(".item_perdido").click(function(){$(".item_perdido").hasClass("perdido1")?creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=1",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=0;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}}):creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=0",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=1;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}})})})})},get:function(){return window.localStorage.grupo_item==null?null:JSON.parse(window.localStorage.grupo_item)},set:function(n){window.localStorage.grupo_item=JSON.stringify(n)}};controller.itemRastrear={init:function(n){n(controller.login.get(),function(){$(".abrir_mapa").click(function(){for(var t=[],n=0;n<controller.login.get().meusitens.length;n++)if(controller.login.get().meusitens[n].id==$(this).attr("item_id")){t.push({nome:controller.login.get().meusitens[n].nome,foto:"https://whereapp.creait.com.br/api/getPhoto?id="+$(this).attr("item_id")+"&tabela=item"});controller.mapa.set(t[0]);break}creait.redirect("mapa")})})},get:function(){return window.localStorage.itemRastrear==null?null:JSON.parse(window.localStorage.itemRastrear)},set:function(n){window.localStorage.itemRastrear=JSON.stringify(n)}};controller.lembrar={init:function(n){n({},function(){$("#btn_lembrar").click(function(){$("#txt_lembrar").toggleInputError($("#txt_lembrar").val()=="","Informe um email");$("#txt_lembrar.has-error").length==0&&creait.get("lembrar?email="+$("#txt_lembrar").val(),null,function(n){myApp.alert(n.message)})})})}};controller.login={init:function(n){n({},function(){$$("#btn_login").click(function(){$("#email").toggleInputError($("#email").val()=="","Informe um email");$("#senha").toggleInputError($("#senha").val()=="","Informe uma senha");localStorage.getItem("pushToken")==null||localStorage.getItem("plataforma_id")==null?($("#push_id").val(""),$("#plataforma").val("")):($("#push_id").val(localStorage.getItem("pushToken")),$("#plataforma").val(localStorage.getItem("plataforma_id")));$("formlogin .has-error").length==0&&creait.get("pessoas",myApp.formToJSON("formlogin"),function(n){if(n==null||n.length==0||n.error!=null||n==0){creait.loader(!1);myApp.alert("Usuário ou senha inválido!","Oops ...");return}myApp.closePanel();controller.login.set(n);creait.redirect("categoria")})});$$("#voltar_login").click(function(){localStorage.getItem("carrinho")!=null?creait.redirect("pagamento"):creait.redirect("index")})})},get:function(){return window.localStorage.login==null?null:JSON.parse(window.localStorage.login)},set:function(n){window.localStorage.login=JSON.stringify(n)}};controller.loja={init:function(n){creait.get("loja",null,function(t){n(t,function(){})})},get:function(){return window.localStorage.loja==null?null:JSON.parse(window.localStorage.loja)},set:function(n){window.localStorage.loja=JSON.stringify(n)}};controller.mapa={init:function(n){n({},function(){var n=new google.maps.Map(document.getElementById("map"),{center:{lat:-23.6525,lng:-46.862847},zoom:16,clickableIcons:!1}),t=new google.maps.Marker({position:{lat:-23.6525,lng:-46.862847},map:n}),i,r;t.addListener("click",function(){r.open(n,t)});i='<div id="content" style="width: 130px;"><div id="siteNotice"><\/div><span id="firstHeading" class="firstHeading" style="font-weight: bolder">'+controller.mapa.get().nome+'<\/span><div id="bodyContent" style="background-image: url('+controller.mapa.get().foto+')"><\/div><div><button style="width: 100%; border-radius: 8px; background-color: #0a7995; border-color: #086077;" onclick="launchnavigator.navigate([-23.647181,-46.847690]);">Abrir GPS<\/button><\/div><\/div>';r=new google.maps.InfoWindow({content:i})})},get:function(){return window.localStorage.mapa==null?null:JSON.parse(window.localStorage.mapa)},set:function(n){window.localStorage.mapa=JSON.stringify(n)}};controller.notificacao={init:function(n){creait.get("notificacao?pessoa_id="+controller.login.get().id,null,function(t){n(t,function(){$(".notify").click(function(){var n=$(this).attr("notificacao_id"),t=$(this).attr("mensagem");myApp.alert(t,"",function(){$.ajax({url:"https://whereapp.creait.com.br/api/notificacao?notificacao_id="+n,method:"POST",dataType:"json",async:!0,success:function(){myApp.views[0].router.refreshPage();var n=controller.login.get();n.num_notificacao-=1;controller.login.set(n)},error:function(n){console.log(n)}})})})})})},get:function(){return window.localStorage.meuItem==null?null:JSON.parse(window.localStorage.meuItem)},set:function(n){window.localStorage.meuItem=JSON.stringify(n)}};controller.meuItem={init:function(n){n(controller.login.get(),function(){$("a.perdido1").html("Encontrado");$(".item_perdido").click(function(){$(".item_perdido").hasClass("perdido1")?creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=1",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=0;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}}):creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=0",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=1;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}})})})},get:function(){return window.localStorage.meuItem==null?null:JSON.parse(window.localStorage.meuItem)},set:function(n){window.localStorage.meuItem=JSON.stringify(n)}};controller.ong={init:function(n){n(controller.ong.get(),function(){})},get:function(){return window.localStorage.ong==null?null:JSON.parse(window.localStorage.ong)},set:function(n){window.localStorage.ong=JSON.stringify(n)}};controller.padrinho={init:function(n){creait.get("padrinho",null,function(t){n(t,function(){$("#div_carrinho").css("display","none")})})},get:function(){return window.localStorage.padrinho==null?null:JSON.parse(window.localStorage.padrinho)},set:function(n){window.localStorage.padrinho=JSON.stringify(n)}};controller.perdido={init:function(n){for(var i={itens:[]},t=0;t<controller.login.get().meusitens.length;t++)controller.login.get().meusitens[t].perdido==1&&i.itens.push(controller.login.get().meusitens[t]);n(i,function(){$(".item_perdido").click(function(){creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=1",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=0;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}})})})},get:function(){return window.localStorage.perdido==null?null:JSON.parse(window.localStorage.perdido)},set:function(n){window.localStorage.perdido=JSON.stringify(n)}};controller.perfil={init:function(n){n(controller.login.get(),function(){var n=myApp.picker({input:"#picker_estados",rotateEffect:!0,cols:[{values:["","AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"]}],toolbarTemplate:'<div class = "toolbar"><div class = "toolbar-inner"><div class = "left"><a href = "#" class = "link close-picker"><\/a><\/div><div class = "center"><\/div><div class = ""><a href = "#" class = "link close-picker">Done<\/a><\/div><\/div><\/div>',onClose:function(){},onOpen:function(){}});$("#picker_estados").click(function(){n.open()});$("#foto_usuario").click(function(){myApp.alert("<div style='color:#2196f3; text-align:left; font-size:20px;' onclick='openCamera(); myApp.closeModal(\".modal\");'>Tirar Foto<\/div><div style='color:#2196f3; text-align:left; font-size:20px;' onclick='openLibrary(); myApp.closeModal(\".modal\");'>Escolher da Biblioteca<\/div>","Escolha uma das opções a baixo!")});$$("#btn_sign_up").click(function(){$("#nome_input").toggleInputError($("#nome_input").val()=="","Informe o seu nome");$("#rg_input").toggleInputError($("#rg_input").val()=="","Informe o seu RG");$("#celular_input").toggleInputError($("#celular_input").val()=="","Informe o seu Celular");$("#dataN_input").toggleInputError($("#dataN_input").val()=="","Informe a sua Data de Nascimento");$("#email_input").toggleInputError($("#email_input").val()==""||!creait.isEmail($("#email_input").val()),"Email inválido");$("#password_input").toggleInputError($("#nome_input").val()==""||$("#password_input").val().length<6,"A senha deve ter no minimo 6 caracteres");$("#password_confirmar_input").toggleInputError($("#password_input").val()!=$("#password_confirmar_input").val(),"A confirmação da senha esta errada");$("#cpf_input").toggleInputError(validarCPF($("#cpf_input").val())==!1,"CPF Inválido");$("#cep_input").toggleInputError($("#cep_input").val()==!1,"Informe o seu CEP");$("#pais_input").toggleInputError($("#pais_input").val()==!1,"Informe o pais");$("#picker_estados").toggleInputError($("#picker_estados").val()==!1,"Selecione o estado");$("#cidade").toggleInputError($("#cidade").val()==!1,"Informe a cidade");$("#bairro_input").toggleInputError($("#bairro_input").val()==!1,"Informe o bairro");$("#rua_input").toggleInputError($("#rua_input").val()==!1,"Inform a rua");$("#numero_input").toggleInputError($("#numero_input").val()==!1,"Informe o numero");$("#password_sa").toggleInputError($("#password_sa").val()!=controller.login.get().senha,"Senha Incorreta");$("#password_sn").toggleInputError($("#password_sn").val()!=$("#password_csn").val(),"As senhas não coincidem");$("#pushC").val(pushToken);$("#platC").val(plataforma);$("#senha_antiga").val()!=""&&$("#password_sa").val()==controller.login.get().senha&&$("#password_sn").val()==$("#password_sn").val()&&$("#password_sn").val()!=""&&$("#senha").val($("#password_sn").val());$("formcadastro .has-error").length==0&&($("#complemento_input").val()==""?$("#complemento_input").val("nt"):$("#complemento_input").val(),creait.post("pessoas",myApp.formToJSON("formcadastro"),function(n){n.erro==null?(controller.login.set(n),creait.redirect("categoria")):(myApp.alert(n.erro,"Atenção"),creait.loader(!1))}))})})}};controller.produto={init:function(n){creait.get("item?responsavel_id="+localStorage.getItem("loja_id"),null,function(t){n(t,function(){})})},get:function(){return window.localStorage.produto==null?null:JSON.parse(window.localStorage.produto)},set:function(n){window.localStorage.produto=JSON.stringify(n)}};controller.qrcode={init:function(n){n({},function(){})},get:function(){return window.localStorage.mapa==null?null:JSON.parse(window.localStorage.mapa)},set:function(n){window.localStorage.mapa=JSON.stringify(n)}};controller.responsavel_juridico={init:function(n){n({},function(){$("#btn_responsavel_juridico").click(function(){creait.post("responsavel_juridico",myApp.formToJSON("#responsavel_juridico"),function(n){var t=controller.login.get();t.responsavel_juridico.push(n);myApp.params.modalButtonOk="Sim";myApp.params.modalButtonCancel="Não";myApp.confirm("Dejesa cadastar outro responsavel?","",function(){console.log("Sim");$("#input").val("")},function(){console.log("Não");creait.redirect("categoria")});myApp.params.modalButtonOk="Ok";myApp.params.modalButtonCancel="Cancelar"})})})},get:function(){return window.localStorage.responsavel_juridico==null?null:JSON.parse(window.localStorage.responsavel_juridico)},set:function(n){window.localStorage.responsavel_juridico=JSON.stringify(n)}};controller.tipo={get:function(){return localStorage.getItem("tipo")==null?null:JSON.parse(localStorage.tipo)},set:function(n){localStorage.tipo=JSON.stringify(n)},private:null};controller.layout={get:function(){return localStorage.getItem("layout")==null?null:JSON.parse(localStorage.layout)},set:function(n){localStorage.layout=JSON.stringify(n)},private:null};controller.busca={init:function(n){n({},function(){function n(){var i=$("#pac-input").val(),n=i.replace(/\D/g,""),t;n!=""&&(t=/^[0-9]{8}$/,t.test(n)?($.ajax({type:"GET",url:"http://viacep.com.br/ws/"+n+"/json",dataType:"json",contentType:!1,processData:!1,success:function(n){$("#enderecos").text(n.logradouro+" - "+n.bairro+" - "+n.localidade);$("#numero").val(n.complemento);$("#pac-input").val(n.cep);$("#cidade").val(n.localidade)},error:function(n){$("html").html(n.responseText)}}),$("#modal_endereco").css("display","block")):myApp.alert("CEP invalido!","Atenção!"))}$$("#btn_search").click(function(){n()});$$("#pac-input").keyup(function(){this.value.length==8&&n()});$$("#btn_search_gps").click(function(){controller.busca.get()==null?navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){var t=[],i=n.coords.latitude,r=n.coords.longitude;t[0]=i;t[1]=r;controller.corfirmarEndereco.set(t);$.ajax({type:"GET",url:"http://maps.googleapis.com/maps/api/geocode/json?latlng="+i+","+r,dataType:"json",contentType:!1,processData:!1,success:function(n){$("#enderecos").text(n.results[0].address_components[1].short_name);$("#numero").val(n.results[0].address_components[0].long_name);$("#pac-input").val(n.results[0].address_components[7].long_name);$("#cidade").val(n.results[0].address_components[5].long_name)},error:function(){}});$("#modal_endereco").css("display","block")},function(){console.log("Erro ao encontrar a possição")}):alert("Parece que Geolocation, que é necessário para esta página, não está ativado em seu navegador. Use um navegador que o suporte."):creait.redirect("categoria")});$$("#btn_voltar").click(function(){$("#modal_endereco").css("display","none")});$$("#btn_confimar").click(function(){var n={};n.number=$("#numero").val();n.number==""?myApp.alert("Preencha o numero!","Atenção!",function(){}):(myApp.showPreloader("Buscando Cardápio"),$("#modal_endereco").css("display","none"),n.active=!0,n.cep=$("#pac-input").val(),n.street=$("#enderecos").html(),n.complement=$("#complemento").val(),n.city=$("#cidade").val(),n.lat=$("#lat").val(),n.lng=$("#lng").val(),controller.login.get()==null?controller.endereco.set(n):(n.pessoa_id=controller.login.get().id,creait.post("endereco",n,function(){})),creait.redirect("categoria"))})})},get:function(){return controller.busca.memory==null?window.localStorage.filiais==null?null:JSON.parse(window.localStorage.filiais):controller.busca.memory},set:function(n){try{window.localStorage.filiais=n==null?n:JSON.stringify(n);controller.busca.memory=null}catch(t){controller.busca.memory=n==null?n:n}},memory:null};controller.erroEndereco={init:function(n){n({},function(){})},get:function(){return window.localStorage.CEP==null?null:JSON.parse(window.localStorage.CEP)},set:function(n){window.localStorage.CEP=n==null?n:JSON.stringify(n)}};controller.index={init:function(n){creait.get("filiais",null,function(t){n(t,function(){controller.login.get()==null&&creait.redirect("categoria")})})}};controller.boleto={init:function(n){n({},function(){})},get:function(){return window.localStorage.boleto==null?null:JSON.parse(window.localStorage.boleto)},set:function(n){window.localStorage.boleto=n==null?n:JSON.stringify(n)}};controller.credito={init:function(n){n({},function(){})},get:function(){return window.localStorage.credito==null?null:JSON.parse(window.localStorage.credito)},set:function(n){window.localStorage.credito=n==null?n:JSON.stringify(n)}};controller.debito={init:function(n){n({},function(){})},get:function(){return window.localStorage.debito==null?null:JSON.parse(window.localStorage.debito)},set:function(n){window.localStorage.debito=n==null?n:JSON.stringify(n)}};$(window).resize(function(){window.resizeTo(425,660)});