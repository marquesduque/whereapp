function readFile2(){var n=this;if(this.files&&this.files[0]){var i=this.files[0],t=new FileReader;t.onload=function(n){var t=new Image;t.src=n.currentTarget.result;t.onload=function(){var u=t.width,f=t.height,o=8e4/t.height,n,i,r,e;u=t.width*(o/100);f=t.height*(o/100);n=t.width;i=t.height;n>i?n>u&&(i*=u/n,n=u):i>f&&(n*=f/i,i=f);r=document.createElement("canvas");r.width=n;r.height=i;r.getContext("2d").drawImage(this,0,0,n,i);e=r.toDataURL();$(".photo_itype").val("data:image/jpeg;base64");$(".photo").val(e.split(",")[1]);$("#foto").css("background-image","url("+e+")")}};t.readAsDataURL(this.files[0])}else $($(n).attr("source")).val(""),alert("O arquivo é muito grande. Favor selecionar um arquivo com no máximo 5 mb");this.files[0].type!="image/jpeg"&&this.files[0].type!="image/png"&&($($(n).attr("source")).val(""),alert("O Tipo de arquivo selecionado é inválido, selecione um formato válido (jpeg, png)"))}function validarCPF(n){if((n=n.replace(/[^\d]+/g,""),n=="")||n.length!=11||n=="00000000000"||n=="11111111111"||n=="22222222222"||n=="33333333333"||n=="44444444444"||n=="55555555555"||n=="66666666666"||n=="77777777777"||n=="88888888888"||n=="99999999999")return!1;for(add=0,i=0;i<9;i++)add+=parseInt(n.charAt(i))*(10-i);if(rev=11-add%11,(rev==10||rev==11)&&(rev=0),rev!=parseInt(n.charAt(9)))return!1;for(add=0,i=0;i<10;i++)add+=parseInt(n.charAt(i))*(11-i);return(rev=11-add%11,(rev==10||rev==11)&&(rev=0),rev!=parseInt(n.charAt(10)))?!1:!0}function readFile1(){var n=this;if(this.files&&this.files[0]){var i=this.files[0],t=new FileReader;t.onload=function(n){var t=new Image;t.src=n.currentTarget.result;t.onload=function(){var u=t.width,f=t.height,o=8e4/t.height,n,i,r,e;u=t.width*(o/100);f=t.height*(o/100);n=t.width;i=t.height;n>i?n>u&&(i*=u/n,n=u):i>f&&(n*=f/i,i=f);r=document.createElement("canvas");r.width=n;r.height=i;r.getContext("2d").drawImage(this,0,0,n,i);e=r.toDataURL();$("#foto_str").val(e.split(",")[1]);$("#foto_usuario").css("background-image","url("+e+")")}};t.readAsDataURL(this.files[0])}else $($(n).attr("source")).val(""),alert("O arquivo é muito grande. Favor selecionar um arquivo com no máximo 5 mb");this.files[0].type!="image/jpeg"&&this.files[0].type!="image/png"&&($($(n).attr("source")).val(""),alert("O Tipo de arquivo selecionado é inválido, selecione um formato válido (jpeg, png)"))}function convidar(){myApp.closeModal(".modal");myApp.prompt("Insira o email para enviarmos o convite!","",function(n){n==""?myApp.alert("Digite o email do usuario que quer convidar","Aviso!"):creait.post("convite?email="+n+"&grupo_id="+localStorage.getItem("grupo_id")+"&pessoa_id="+controller.login.get().id,null,function(n){n==0?myApp.alert("E-mail não cadastrado no sistema","Aviso!"):n==1?myApp.alert("Esta pessoa já faz parte do grupo","Aviso!"):myApp.alert("Convite enviado com sucesso!","Aviso!")})},function(){})}function validarCPF(n){if((n=n.replace(/[^\d]+/g,""),n=="")||n.length!=11||n=="00000000000"||n=="11111111111"||n=="22222222222"||n=="33333333333"||n=="44444444444"||n=="55555555555"||n=="66666666666"||n=="77777777777"||n=="88888888888"||n=="99999999999")return!1;for(add=0,i=0;i<9;i++)add+=parseInt(n.charAt(i))*(10-i);if(rev=11-add%11,(rev==10||rev==11)&&(rev=0),rev!=parseInt(n.charAt(9)))return!1;for(add=0,i=0;i<10;i++)add+=parseInt(n.charAt(i))*(11-i);return(rev=11-add%11,(rev==10||rev==11)&&(rev=0),rev!=parseInt(n.charAt(10)))?!1:!0}function readFile3(){var n=this;if(this.files&&this.files[0]){var i=this.files[0],t=new FileReader;t.onload=function(n){var t=new Image;t.src=n.currentTarget.result;t.onload=function(){var u=t.width,f=t.height,o=8e4/t.height,n,i,r,e;u=t.width*(o/100);f=t.height*(o/100);n=t.width;i=t.height;n>i?n>u&&(i*=u/n,n=u):i>f&&(n*=f/i,i=f);r=document.createElement("canvas");r.width=n;r.height=i;r.getContext("2d").drawImage(this,0,0,n,i);e=r.toDataURL();$("#foto_str").val(e.split(",")[1]);$("#foto_usuario").css("background-image","url("+e+")")}};t.readAsDataURL(this.files[0])}else $($(n).attr("source")).val(""),alert("O arquivo é muito grande. Favor selecionar um arquivo com no máximo 5 mb");this.files[0].type!="image/jpeg"&&this.files[0].type!="image/png"&&($($(n).attr("source")).val(""),alert("O Tipo de arquivo selecionado é inválido, selecione um formato válido (jpeg, png)"))}controller.confirma_compra={init:function(n){n({},function(){})},get:function(){return window.localStorage.confirma_compra==null?null:JSON.parse(window.localStorage.confirma_compra)},set:function(n){window.localStorage.confirma_compra=JSON.stringify(n)}};controller.endereco_entrega={init:function(n){n({},function(){$(".endereco_entrega").click(function(){$(this).attr("valor")==0?($("#endereco_novo").css("display","block"),$("#estado").val(controller.login.get().estado),$("#cidade").val(controller.login.get().cidade),$("#bairro").val(controller.login.get().bairro),$("#rua").val(controller.login.get().rua),$("#numero").val(controller.login.get().numero),$("#cep").val(controller.login.get().cep),$("#complemento").val(controller.login.get().complemento)):$(this).attr("valor")==1?($("#endereco_novo").css("display","block"),$("#estado").val(""),$("#cidade").val(""),$("#bairro").val(""),$("#rua").val(""),$("#numero").val(""),$("#cep").val(""),$("#complemento").val("")):$("#endereco_novo").css("display","none")});$("#ir_forma_pagamento").click(function(){var n=controller.carrinho.get();if($("#endereco_novo").css("display")=="block")if($("#rua").toggleInputError($("#rua").val()=="","Informe a rua"),$("#numero").toggleInputError($("#numero").val()=="","Informe o numero"),$("#complemento").toggleInputError($("#complemento").val()=="","Informe um complemento"),$("#bairro").toggleInputError($("#bairro").val()=="","Informe o bairro"),$("#cep").toggleInputError($("#cep").val()=="","Informe o cep"),$("#cidade").toggleInputError($("#cidade").val()=="","Informe a cidade"),$("#estado").toggleInputError($("#estado").val()=="","Selecione o estado"),$("#endereco_novo .has-error").length==0)n.endereco_bool=!0,n.rua_entrega=$("#rua").val(),n.numero_entrega=$("#numero").val(),n.complemento_entrega=$("#complemento").val(),n.bairro_entrega=$("#bairro").val(),n.cep_entrega=$("#cep").val().replace("-",""),n.cidade_entrega=$("#cidade").val(),n.estado_entrega=$("#estado").val();else return;controller.carrinho.set(n);creait.redirect("forma_pagamento")})})},get:function(){return window.localStorage.endereco_entrega==null?null:JSON.parse(window.localStorage.endereco_entrega)},set:function(n){window.localStorage.endereco_entrega=JSON.stringify(n)}};controller.detalhe_padrinho={init:function(n){n(controller.detalhe_padrinho.get(),function(){$("#btn_apadrinhar").click(function(){creait.redirect("adesao")})})},get:function(){return window.localStorage.detalhe_padrinho==null?null:JSON.parse(window.localStorage.detalhe_padrinho)},set:function(n){window.localStorage.detalhe_padrinho=JSON.stringify(n)}};controller.adesao={init:function(n){n({},function(){$("#num_cartao_fp").on("blur",function(){$.get("/api/pagseguro",null,function(n){PagSeguroDirectPayment.setSessionId(n);PagSeguroDirectPayment.getBrand({cardBin:$("#num_cartao_fp").val(),success:function(n){$("#img_bandeira_fp").attr("src","https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/42x20/"+n.brand.name+".png");$("#bandeira_fp").val(n.brand.name);$("#img_bandeira_fp").parent().css("display","block")},error:function(){$("#img_bandeira_fp").parent().css("display","none");$("#num_cartao_fp").val("");$("#bandeira_fp").val("");myApp.alert("Numero de cartão invalido","")},complete:function(){}})})});$("#finalizar_cc_fp").click(function(){$("#valor_mensal").toggleInputError($("#valor_mensal").val()=="","Informe o valor a ser cobrado mensalmente");$("#dia_da_cobraça").toggleInputError($("#dia_da_cobraça").val()=="","Informe o o dia da cobrança");$("#nome_cc_fp").toggleInputError($("#nome_cc_fp").val()=="","Informe o nome impresso no cartao");$("#cpf_cc_fp").toggleInputError($("#cpf_cc_fp").val()=="","Informe o CPF do dono do cartao");$("#data_nasc_cc_fp").toggleInputError($("#data_nasc_cc_fp").val()=="","Informe a data de nascimento do dono do cartao");$("#num_cartao_fp").toggleInputError($("#num_cartao_fp").val()=="","Informe o numero do cartao");$("#cvv_fp").toggleInputError($("#cvv_fp").val()=="","Informe o Codigo de segurança");$("#exp_date_fp").toggleInputError($("#exp_date_fp").val()=="","Informe a data de validade do cartao");$("formcc .has-error").length==0&&pagseguro.plano(myApp.formToJSON("formcc"))})})},get:function(){return window.localStorage.forma_pagamento==null?null:JSON.parse(window.localStorage.forma_pagamento)},set:function(n){window.localStorage.forma_pagamento=JSON.stringify(n)}};controller.addItem={init:function(n,t){n({},function(){$(".responsavel_id").val(controller.login.get().id);$('input[type="file"]').each(function(){this.addEventListener("change",readFile2,!1)});$("#foto").click(function(){$("#pega_foto").click()});$("#tipoI").html('<option value="" selected=""><\/option><option value="1">Pessoa<\/option><option value="2">Animal<\/option><option value="3">Objeto<\/option><option value="4">Veiculo<\/option><option value="5">Carga<\/option><option value="6" selected="">Outros<\/option>');t.finalidade=="doacao"&&($("#tela_add").css("heigth","calc(100% - 50px)"),$("#tela_add").css("margin-top","50px"),$(".tabbar").css("display","none"),$(".doacao").val("true"),$("[value='1']").css("display","none"),$("[value='4']").css("display","none"),$("[value='5']").css("display","none"));t.finalidade=="padrinho"&&($("#tela_add").css("heigth","calc(100% - 50px)"),$("#tela_add").css("margin-top","50px"),$(".tabbar").css("display","none"),$(".apadrinhar").val("true"),$("[value='3']").css("display","none"),$("[value='4']").css("display","none"),$("[value='5']").css("display","none"));t.tipo!=undefined&&($("#li_tipo").css("display","none"),$("#tipoI").val(t.tipo),$(".tipo_id").val(t.tipo),$("#"+t.tipo).css("display","block"),$("#tela_add").css("heigth","calc(100% - 50px)"),$("#tela_add").css("margin-top","50px"),$(".tabbar").css("display","none"));$("#voltar_addItem").click(function(){t.finalidade=="doacao"?(creait.redirect("doacao","tipo="+t.tipo),controller.addItem.set(null)):t.finalidade=="padrinho"?(creait.redirect("padrinho"),controller.addItem.set(null)):t.tipo!=undefined?(creait.redirect("categoria"),controller.addItem.set(null)):(creait.redirect("meuItem"),controller.addItem.set(null))});$("#tipoI").on("change",function(){$("form").css("display","none");$("#"+$("#tipoI").val()).css("display","block");$(".tipo_id").val($("#tipoI").val());$("#grupo").css("display","block")});controller.addItem.get()!=null&&($("#tela_add").css("heigth","calc(100% - 50px)"),$("#tela_add").css("margin-top","50px"),$(".tabbar").css("display","none"),$("#foto").css("background-image","url(https://whereapp.creait.com.br/api/getPhoto?id="+controller.addItem.get().id+"&tabela=item)"),$("#excluir").css("display","flex"),$("#li_tipo").css("display","none"),$("#tipoI").val(controller.addItem.get().tipo),$(".tipo_id").val(controller.addItem.get().tipo),$("#"+controller.addItem.get().tipo).css("display","block"),myApp.formFromJSON("#"+controller.addItem.get().tipo,{id:controller.addItem.get().id,responsavel_id:controller.login.get().id,tipo_id:controller.addItem.get().tipo,nome:controller.addItem.get().nome,cpf:controller.addItem.get().cpf,rg:controller.addItem.get().rg,nascimento:controller.addItem.get().nascimento,genero:controller.addItem.get().genero,descricao:controller.addItem.get().descricao,cor:controller.addItem.get().cor,raca:controller.addItem.get().raca,fabricante:controller.addItem.get().fabricante,marca:controller.addItem.get().marca,num_serie:controller.addItem.get().num_serie,modelo:controller.addItem.get().modelo}));$("#btn_cadastra_item").click(function(){if($("[name='doacao']").val($("[name='doacao_slc']:checked").val()),$("[name='apadrinhar']").val($("[name='apadrinhar_slc']:checked").val()),$("#tipoI").val()==1){if($("#nome_1").toggleInputError($("#nome_1").val()=="","Informe o nome"),$("#rg_1").toggleInputError($("#rg_1").val()=="","Informe o RG"),$("#nasc_1").toggleInputError($("#nasc_1").val()=="","Informe o Data de Nascimento"),$("#desc_1").toggleInputError($("#desc_1").val()=="","Digite alguma observação"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==2){if($("#nome_2").toggleInputError($("#nome_2").val()=="","Informe o nome"),$("#cor_2").toggleInputError($("#cor_2").val()=="","Informe a Cor"),$("#raca_2").toggleInputError($("#raca_2").val()=="","Informe a raça"),$("#desc_2").toggleInputError($("#desc_2").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==3){if($("#nome_3").toggleInputError($("#nome_3").val()=="","Informe o nome"),$("#fabri_3").toggleInputError($("#fabri_3").val()=="","Informe o fabricante"),$("#marca_3").toggleInputError($("#marca_3").val()=="","Informe a marca"),$("#cor_3").toggleInputError($("#cor_3").val()=="","Informe a cor"),$("#desc_3").toggleInputError($("#desc_3").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==4){if($("#nome_4").toggleInputError($("#nome_4").val()=="","Informe a Placa"),$("#fabri_4").toggleInputError($("#fabri_4").val()=="","Informe o fabricante"),$("#marca_4").toggleInputError($("#marca_4").val()=="","Informe a marca"),$("#cor_4").toggleInputError($("#cor_4").val()=="","Informe a cor"),$("#modelo_4").toggleInputError($("#modelo_4").val()=="","Informe o modelo"),$("#desc_4").toggleInputError($("#desc_4").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==5){if($("#nome_5").toggleInputError($("#nome_5").val()=="","Informe o seu nome"),$("#desc_5").toggleInputError($("#desc_5").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else if($("#tipoI").val()==6){if($("#nome_6").toggleInputError($("#nome_6").val()=="","Informe o seu nome"),$("#desc_6").toggleInputError($("#desc_6").val()=="","Digite alguma obersarvação/descriçao"),$("#"+$("#tipoI").val()+" .has-error").length>0)return}else{myApp.alert("Selecione um item","");return}creait.post("item",myApp.formToJSON("#"+$("#tipoI").val()),function(n){var t=controller.login.get();if(controller.addItem.get()!=null)for(i=0;i<t.meusitens.length;i++)if(t.meusitens[i].id==n.itens[0].id){t.meusitens[i].tipo=n.itens[0].tipo;t.meusitens[i].nome=n.itens[0].nome;t.meusitens[i].cor=n.itens[0].cor;t.meusitens[i].raca=n.itens[0].raca;t.meusitens[i].nascimento=n.itens[0].nascimento;t.meusitens[i].responsavel_id=n.itens[0].responsavel_id;t.meusitens[i].valor=n.itens[0].valor;t.meusitens[i].estoque=n.itens[0].estoque;t.meusitens[i].descricao=n.itens[0].descricao;t.meusitens[i].perdido=n.itens[0].perdido;t.meusitens[i].rastreador=n.itens[0].rastreador;t.meusitens[i].marca=n.itens[0].marca;t.meusitens[i].modelo=n.itens[0].modelo;t.meusitens[i].fabricante=n.itens[0].fabricante;t.meusitens[i].num_serie=n.itens[0].num_serie;controller.login.set(t);controller.addItem.set(null);creait.redirect("meuItem");break}controller.addItem.set(null);t.meusitens.push(n.itens[0]);controller.login.set(t);creait.redirect("meuItem")})});$("#excluir").click(function(){creait.post("excluirItem?id="+controller.addItem.get().id,null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens.splice(t,1);controller.login.set(i);creait.redirect("meuItem");break}})});$("#pessoa_id").val(controller.login.get().id);$("#btn_salvar_grupo").click(function(){$("#nome_grupo").toggleInputError($("#nome_grupo").val()=="","Digite alguma obersarvação/descriçao");$("#descricao_grupo").toggleInputError($("#descricao_grupo").val()=="","Digite alguma obersarvação/descrição");$("#grupo .has-error").length==0&&creait.post("grupo",myApp.formToJSON("#grupo"),function(n){var t=controller.login.get();t.grupos.push(n);controller.login.set(t);creait.redirect("meuItem")})})})},get:function(){return window.localStorage.addItem==null?null:JSON.parse(window.localStorage.addItem)},set:function(n){window.localStorage.addItem=JSON.stringify(n)}};controller.additemgrupo={init:function(n){n(controller.login.get(),function(){$("#btn_cadastra_item_grupo").click(function(){var n="";$(".itens").each(function(t){$(".itens")[t].checked==!0&&(n+="&item_id="+$($(".itens")[t]).val())});creait.post("item?grupo_id="+localStorage.getItem("grupo_id")+n,null,function(n){for(var t=controller.login.get(),i=0;i<t.grupos.length;i++)if(t.grupos[i].id==localStorage.getItem("grupo_id")){t.grupos[i].itens.push(n);controller.login.set(t);break}creait.redirect("grupo_item")})})})},get:function(){return window.localStorage.additemgrupo==null?null:JSON.parse(window.localStorage.additemgrupo)},set:function(n){window.localStorage.additemgrupo=JSON.stringify(n)}};controller.adicionar={init:function(n){n(controller.adicionar.get(),function(){$(".menos_adicionar").click(function(){if($("#qtde_adicionar").html()>1){var n=controller.adicionar.get(),t=parseInt($("#qtde_adicionar").html())-1;$("#qtde_adicionar").html(t);n.estoque=parseInt(n.estoque)+1;controller.adicionar.set(n)}});$(".mais_adicionar").click(function(){if($("#qtde_adicionar").html()==controller.adicionar.get().estoque)myApp.alert("Quantidade maxima de produtos em estoque atingido","...");else{var n=controller.adicionar.get(),t=parseInt($("#qtde_adicionar").html())+1;$("#qtde_adicionar").html(t);n.estoque=parseInt(n.estoque)-1;controller.adicionar.set(n)}});$("#btn_adicionar").click(function(){var n=controller.carrinho.get(),i=controller.adicionar.get(),r,t,u;if(i.estoque==0){myApp.alert("Este produto está fora de estoque.","");return}if(i.estoque=parseInt(i.estoque)-parseInt($("#qtde_adicionar").html()),controller.adicionar.set(i),n==null)r={nome:"",cpf:"",email:"",hash:"",card_token:"",expiracao:"",data_nascimento:"",telefone:"",tipo:"",valor_total:parseFloat(controller.adicionar.get().valor)*parseFloat($("#qtde_adicionar").html()),loja_id:controller.adicionar.get().responsavel_id,endereco_bool:!1,rua_entrega:"",numero_entrega:"",complemento_entrega:"",bairro_entrega:"",cep_entrega:"",cidade_entrega:"",estado_entrega:"",rua:controller.login.get().rua,numero:controller.login.get().numero,complemento:controller.login.get().complemento==null?"nt":controller.login.get().complemento,bairro:controller.login.get().bairro,cep:controller.login.get().cep.replace("-",""),cidade:controller.login.get().cidade,estado:controller.login.get().estado,itens:[{id:controller.adicionar.get().id,nome:controller.adicionar.get().nome,qtde:parseInt($("#qtde_adicionar").html()),descricao:controller.adicionar.get().descricao,valor:controller.adicionar.get().valor}]},r.valor_total=r.valor_total.toFixed(2),controller.carrinho.set(r),myApp.alert("Item adicionado com sucesso!","...");else{for(n.valor_total=parseFloat(controller.adicionar.get().valor)*parseFloat($("#qtde_adicionar").html())+parseFloat(n.valor_total),n.valor_total=n.valor_total.toFixed(2),t=0;t<=n.itens.length;t++)if(t==n.itens.length){n.itens.push({id:controller.adicionar.get().id,nome:controller.adicionar.get().nome,qtde:parseInt($("#qtde_adicionar").html()),descricao:controller.adicionar.get().descricao,valor:controller.adicionar.get().valor,foto:controller.adicionar.get().foto,foto_itype:controller.adicionar.get().foto_itype});break}else if(n.itens[t].id==controller.adicionar.get().id){u=parseInt(n.itens[t].qtde)+parseInt($("#qtde_adicionar").html());n.itens[t].qtde=u;break}controller.carrinho.set(n);myApp.alert("Item adicionado com sucesso!","...")}creait.redirect("produto")})})},get:function(){return window.localStorage.adicionar==null?null:JSON.parse(window.localStorage.adicionar)},set:function(n){window.localStorage.adicionar=JSON.stringify(n)}};controller.cadastrarRastreador={init:function(n){n({},function(){var n=myApp.picker({input:"#picker_item",rotateEffect:!0,cols:[{values:["Item 1","Item 2","Item 3","Item 4","Item 5"]}],toolbarTemplate:'<div class = "toolbar"><div class = "toolbar-inner"><div class = "left"><a href = "#" class = "link close-picker" onclick="creait.redirect(\'addItem\')">Cadastrar Item<\/a><\/div><div class = "center"><\/div><div class = ""><a href = "#" class = "link close-picker">Done<\/a><\/div><\/div><\/div>',onClose:function(){},onOpen:function(){}});$("#picker_item").click(function(){n.open()})})},get:function(){return window.localStorage.cadastrarRastreador==null?null:JSON.parse(window.localStorage.cadastrarRastreador)},set:function(n){window.localStorage.cadastrarRastreador=JSON.stringify(n)}};controller.cadastro={init:function(n){n({},function(){$('input[type="file"]').each(function(){this.addEventListener("change",readFile1,!1)});$("#foto_usuario").click(function(){$("#pega_foto").click()});var n=myApp.picker({input:"#picker_estados",rotateEffect:!0,cols:[{values:["","AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"]}],toolbarTemplate:'<div class = "toolbar"><div class = "toolbar-inner"><div class = "left"><a href = "#" class = "link close-picker"><\/a><\/div><div class = "center"><\/div><div class = ""><a href = "#" class = "link close-picker">Done<\/a><\/div><\/div><\/div>',onClose:function(){},onOpen:function(){}});$("#picker_estados").click(function(){n.open()});$$("#btn_sign_up").click(function(){$("#nome_input").toggleInputError($("#nome_input").val()=="","Informe o seu nome");$("#rg_input").toggleInputError($("#rg_input").val()=="","Informe o seu RG");$("#celular_input").toggleInputError($("#celular_input").val()=="","Informe o seu Celular");$("#dataN_input").toggleInputError($("#dataN_input").val()=="","Informe a sua Data de Nascimento");$("#email_input").toggleInputError($("#email_input").val()==""||!creait.isEmail($("#email_input").val()),"Email inválido");$("#password_input").toggleInputError($("#nome_input").val()==""||$("#password_input").val().length<6,"A senha deve ter no minimo 6 caracteres");$("#password_confirmar_input").toggleInputError($("#password_input").val()!=$("#password_confirmar_input").val(),"A confirmação da senha esta errada");$("#cpf_input").toggleInputError($("#cpf_input").val()=="","Informe o seu CPF");$("#cpf_input").toggleInputError(validarCPF($("#cpf_input").val())==!1,"CPF Inválido");$("#cep_input").toggleInputError($("#cep_input").val()=="","Informe o seu CEP");$("#pais_input").toggleInputError($("#pais_input").val()=="","Informe o pais");$("#picker_estados").toggleInputError($("#picker_estados").val()=="","Selecione um estado");$("#cidade").toggleInputError($("#cidade").val()=="","Informe a cidade");$("#bairro_input").toggleInputError($("#bairro_input").val()=="","Informe o bairro");$("#rua_input").toggleInputError($("#rua_input").val()=="","Informe a rua");$("#numero_input").toggleInputError($("#numero_input").val()=="","Informe o numero");$("#pushC").val(pushToken);$("#platC").val(plataforma);$("formcadastro .has-error").length==0&&($("#complemento_input").val()==""?$("#complemento_input").val("nt"):$("#complemento_input").val(),creait.post("pessoas",myApp.formToJSON("formcadastro"),function(n){n.erro==null?(controller.login.set(n),creait.redirect("categoria")):(myApp.alert(n.erro,"Atenção"),creait.loader(!1))}))})})}};controller.carrinho={init:function(n){n(controller.carrinho.get(),function(){$("#excluir_item").click(function(){myApp.params.modalButtonOk="Sim";myApp.params.modalButtonCancel="Não";var n=$(this).attr("item_id");myApp.confirm("Deseja excluir item do carrinho?","",function(){var i,t;for(myApp.params.modalButtonOk="Ok",myApp.params.modalButtonCancel="Cancelar",i=0;i<controller.carrinho.get().itens.length;i++)if(n==controller.carrinho.get().itens[i].id)if(t=controller.carrinho.get(),t.itens.splice(i,1),t.itens.length==0)controller.carrinho.set(null),creait.redirect("categoria");else{t.valor_total=t.valor_total-t.itens[i].valor*t.itens[i].qtde;controller.carrinho.set(t);myApp.views[0].router.refreshPage();break}},function(){myApp.params.modalButtonOk="Ok";myApp.params.modalButtonCancel="Cancelar"})});$("#avancar_compra").click(function(){creait.redirect("endereco_entrega")})})},get:function(){return window.localStorage.carrinho==null?null:JSON.parse(window.localStorage.carrinho)},set:function(n){window.localStorage.carrinho=JSON.stringify(n)}};controller.categoria={init:function(n){n({},function(){var t,n;if(controller.login.get().num_notificacao>0?($("#numero_not").html(controller.login.get().num_notificacao),$("#numero_not").css("display","flex")):$("#numero_not").css("display","none"),$(".imagem_divisor").css("height",$(".imagem_divisor").innerWidth()),controller.login.get().notificacoes.length==0)$("#nao_tem_mensagem").css("display","flex"),$("#notificacoes").css("display","none");else for($("#nao_tem_mensagem").css("display","none"),$("#notificacoes").css("display","block"),t="",n=0;n<=controller.login.get().notificacoes.length;n++)n==controller.login.get().notificacoes.length?$("#notificacoes").html(t):t+='<li class="produtoli grid-item-m swipeout notify" mensagem="'+controller.login.get().notificacoes[n].mensagem+'" notificacao_id="'+controller.login.get().notificacoes[n].id+'" style="position: relative;">   <div class="lido'+controller.login.get().notificacoes[n].lido+'"><\/div>   <div class="item-title-row">       <div class="titulo_produto item-title" style="text-align: right;">'+controller.login.get().notificacoes[n].data+'<\/div>       <div style="padding: 0px 10px; text-align: left;">'+controller.login.get().notificacoes[n].mensagem_previa+'<\/div>   <\/div>   <div style="clear:both"><\/div><\/li>';$(".notify").click(function(){var n=$(this).attr("notificacao_id"),t=$(this).attr("mensagem");myApp.alert(t,"",function(){$.ajax({url:"/api/notificacao?notificacao_id="+n,method:"POST",dataType:"json",async:!0,success:function(){for(var t=controller.login.get(),i=0;i<t.notificacoes.length;i++)if(t.notificacoes[i].id==n){t.notificacoes[i].lido=1;t.num_notificacao-=1;controller.login.set(t);break}myApp.views[0].router.refreshPage()},error:function(n){console.log(n)}})})})})},get:function(){return window.localStorage.categoria==null?null:JSON.parse(window.localStorage.categoria)},set:function(n){window.localStorage.categoria=JSON.stringify(n)}};controller.contato_doador={init:function(n){n(controller.contato_doador.get(),function(){$("#btn_adotar").click(function(){myApp.params.modalButtonOk="Sim";myApp.params.modalButtonCancel="Não";var n=$(this).attr("doador_id"),t=$(this).attr("item_id");myApp.confirm("Para que a adoção seja confirmada, seus dados para contato serão compartilhados com o doador! Você concorda com isso?","Deseja finalizar?",function(){creait.post("doacao?pessoa_id="+controller.contato_doador.get().id_doador+"&doador_id="+n+"&item_id="+t,null,function(){creait.loader(!1);myApp.alert("Dados compartilhados com sucesso, agora é só aguardar o doador entrar em contato!","");creait.redirect("categoria")});myApp.params.modalButtonOk="Ok";myApp.params.modalButtonCancel="Cancelar"},function(){myApp.params.modalButtonOk="Ok";myApp.params.modalButtonCancel="Cancelar"})});$("#voltar_doacao").click(function(){creait.redirect("doacao","tipo="+controller.contato_doador.get().tipo)})})},get:function(){return window.localStorage.contato_doador==null?null:JSON.parse(window.localStorage.contato_doador)},set:function(n){window.localStorage.contato_doador=JSON.stringify(n)}};controller.doacao={init:function(n,t){creait.get("doacao?pessoa_id="+controller.login.get().id+"&tipo_id="+t.tipo,null,function(i){localStorage.setItem("num_doacao",i.adocaos.length);localStorage.setItem("num_ong",i.ongs.length);n(i,function(){t.tipo==1?($("#doar_ong").css("display","block"),$("#adocao").css("display","none"),$("#addItemDoacao").css("display","none"),localStorage.getItem("num_ong")==0?$("#nao_tem_ong").css("display","flex"):$("#nao_tem_ong").css("display","none")):($("#doar_ong").css("display","none"),$("#adocao").css("display","block"),localStorage.getItem("num_doacao")==0?$("#nao_tem_doacao").css("display","flex"):$("#nao_tem_doacao").css("display","none"));$("#addItemDoacao").click(function(){creait.redirect("addItem","tipo="+t.tipo+"&finalidade=doacao")})})})},get:function(){return window.localStorage.doacao==null?null:JSON.parse(window.localStorage.doacao)},set:function(n){window.localStorage.doacao=JSON.stringify(n)}};controller.forma_pagamento={init:function(n){n({},function(){localStorage.getItem("ong")=="1"?($("#pagar_b_fp").css("display","none"),$("#pagar_cc1_fp").css("background-color","#CCCCCC"),$("#pagamento_cc_fp").css("display","block")):($("#pagar_b_fp").css("display","flex"),$("#pagar_cc1_fp").css("background-color","#FFFFFF"),$("#pagamento_cc_fp").css("display","none"));$("#voltar_fp").click(function(){localStorage.getItem("ong")=="1"?(localStorage.setItem("ong","0"),controller.carrinho.set(null),controller.carrinhoEspera.get()!=null&&(controller.carrinho.set(controller.carrinhoEspera.get()),controller.carrinhoEspera.set(null)),creait.redirect("doacao")):$("#voltar_fp").click(function(){creait.redirect("categoria")})});$("#pagar_cc_fp").click(function(){$("#pagamento_cc_fp").css("display","block");$("#pagamento_b_fp").css("display","none");$("#pagar_cc1_fp").css("background-color","#CCCCCC");$("#pagar_b1_fp").css("background-color","#FFFFFF")});$("#pagar_b_fp").click(function(){$("#pagamento_b_fp").css("display","block");$("#pagamento_cc_fp").css("display","none");$("#pagar_b1_fp").css("background-color","#CCCCCC");$("#pagar_cc1_fp").css("background-color","#FFFFFF")});var n=myApp.picker({input:"#estado_cobranca_fp",rotateEffect:!0,cols:[{values:["","AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"]}],toolbarTemplate:'<div class = "toolbar"><div class = "toolbar-inner"><div class = "left"><a href = "#" class = "link close-picker"><\/a><\/div><div class = "center"><\/div><div class = ""><a href = "#" class = "link close-picker">Done<\/a><\/div><\/div><\/div>',onClose:function(){},onOpen:function(){}});$("#picker_estados").click(function(){n.open()});$("#num_cartao_fp").on("blur",function(){$.get("/api/pagseguro",null,function(n){PagSeguroDirectPayment.setSessionId(n);PagSeguroDirectPayment.getBrand({cardBin:$("#num_cartao_fp").val(),success:function(n){$("#img_bandeira_fp").attr("src","https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/42x20/"+n.brand.name+".png");$("#bandeira_fp").val(n.brand.name);$("#img_bandeira_fp").parent().css("display","block")},error:function(){$("#img_bandeira_fp").parent().css("display","none");$("#bandeira_fp").val("");$("#num_cartao_fp").val("");myApp.alert("Numero de cartão invalido","")},complete:function(){}})})});$("#finalizar_cc_fp").click(function(){$("#nome_cc_fp").toggleInputError($("#nome_cc_fp").val()=="","Informe o nome impresso no cartao");$("#cpf_cc_fp").toggleInputError($("#cpf_cc_fp").val()=="","Informe o CPF do dono do cartao");$("#data_nasc_cc_fp").toggleInputError($("#data_nasc_cc_fp").val()=="","Informe a data de nascimento do dono do cartao");$("#telefone_cc_fp").toggleInputError($("#telefone_cc_fp").val()=="","Informe um telefone para contato");$("#num_cartao_fp").toggleInputError($("#num_cartao_fp").val()=="","Informe o numero do cartao");$("#cvv_fp").toggleInputError($("#cvv_fp").val()=="","Informe o Codigo de segurança");$("#exp_date_fp").toggleInputError($("#exp_date_fp").val()=="","Informe a data de validade do cartao");var n=controller.carrinho.get();n.tipo="credito";controller.carrinho.set(n);$("formcc .has-error").length==0&&pagseguro.plano(myApp.formToJSON("formcc"))});$("#finalizar_b_fp").click(function(){var n=controller.carrinho.get();n.tipo="boleto";controller.carrinho.set(n);$("formb .has-error").length==0&&pagseguro.plano(myApp.formToJSON("formb"))})})},get:function(){return window.localStorage.forma_pagamento==null?null:JSON.parse(window.localStorage.forma_pagamento)},set:function(n){window.localStorage.forma_pagamento=JSON.stringify(n)}};controller.grupo_item={init:function(n){creait.get("grupo?id="+localStorage.getItem("grupo_id")+"&pessoa_id="+controller.login.get().id,null,function(t){controller.grupo_item.set(t.convite);n(t,function(){$("a.perdido1").html("Encontrado");controller.grupo_item.get()==1?($("#aceitarrecusar").css("display","block"),$("#convidaitem").css("display","none")):($("#aceitarrecusar").css("display","none"),$("#convidaitem").css("display","block"));$("#qrgrupo").click(function(){cordova.plugins.barcodeScanner.encode(cordova.plugins.barcodeScanner.Encode.TEXT_TYPE,"grupo_"+$(this).attr("grupo_id"),function(n){alert("encode success: "+n)},function(n){alert("encoding failed: "+n)})});$("#aceitar").click(function(){creait.post("grupo?grupo_id="+localStorage.getItem("grupo_id")+"&pessoa_id="+controller.login.get().id+"&aceitar=a",null,function(){})});$("#recusar").click(function(){creait.post("grupo?grupo_id="+localStorage.getItem("grupo_id")+"&pessoa_id="+controller.login.get().id,null,function(n){for(var i,t=0;t<controller.login.get().grupos.length;t++)if(controller.login.get().grupos[t].id==n){i=controller.login.get();i.grupos.splice(t,1);controller.login.set(i);creait.redirect("grupo");creait.loader(!1);break}})});$(".item_perdido").click(function(){$(".item_perdido").hasClass("perdido1")?creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=1",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=0;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}}):creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=0",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=1;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}})})})})},get:function(){return window.localStorage.grupo_item==null?null:JSON.parse(window.localStorage.grupo_item)},set:function(n){window.localStorage.grupo_item=JSON.stringify(n)}};controller.item={init:function(n){n({},function(){})},get:function(){return window.localStorage.item==null?null:JSON.parse(window.localStorage.item)},set:function(n){window.localStorage.item=JSON.stringify(n)}};controller.itemRastrear={init:function(n){n(controller.login.get(),function(){$(".abrir_mapa").click(function(){for(var t=[],n=0;n<controller.login.get().meusitens.length;n++)if(controller.login.get().meusitens[n].id==$(this).attr("item_id")){t.push({nome:controller.login.get().meusitens[n].nome,foto:"https://whereapp.creait.com.br/api/getPhoto?id="+$(this).attr("item_id")+"&tabela=item"});controller.mapa.set(t[0]);break}creait.redirect("mapa")})})},get:function(){return window.localStorage.itemRastrear==null?null:JSON.parse(window.localStorage.itemRastrear)},set:function(n){window.localStorage.itemRastrear=JSON.stringify(n)}};controller.lembrar={init:function(n){n({},function(){$("#btn_lembrar").click(function(){$("#txt_lembrar").toggleInputError($("#txt_lembrar").val()=="","Informe um email");$("#txt_lembrar.has-error").length==0&&creait.get("lembrar?email="+$("#txt_lembrar").val(),null,function(n){myApp.alert(n.message)})})})}};controller.login={init:function(n){n({},function(){$$("#btn_login").click(function(){$("#email").toggleInputError($("#email").val()=="","Informe um email");$("#senha").toggleInputError($("#senha").val()=="","Informe uma senha");localStorage.getItem("pushToken")==null||localStorage.getItem("plataforma_id")==null?($("#push_id").val(""),$("#plataforma").val("")):($("#push_id").val(localStorage.getItem("pushToken")),$("#plataforma").val(localStorage.getItem("plataforma_id")));$("formlogin .has-error").length==0&&creait.get("pessoas",myApp.formToJSON("formlogin"),function(n){if(n==null||n.length==0||n.error!=null||n==0){creait.loader(!1);myApp.alert("Usuário ou senha inválido!","Oops ...");return}myApp.closePanel();controller.login.set(n);creait.redirect("categoria")})});$$("#voltar_login").click(function(){localStorage.getItem("carrinho")!=null?creait.redirect("pagamento"):creait.redirect("index")})})},get:function(){return window.localStorage.login==null?null:JSON.parse(window.localStorage.login)},set:function(n){window.localStorage.login=JSON.stringify(n)}};controller.loja={init:function(n){creait.get("loja",null,function(t){n(t,function(){controller.carrinho.get()==null?$("#abrir_carrinho").css("display","none"):$("#abrir_carrinho").css("display","flex")})})},get:function(){return window.localStorage.loja==null?null:JSON.parse(window.localStorage.loja)},set:function(n){window.localStorage.loja=JSON.stringify(n)}};controller.mapa={init:function(n){n({},function(){var n=new google.maps.Map(document.getElementById("map"),{center:{lat:-23.6525,lng:-46.862847},zoom:16,clickableIcons:!1}),t=new google.maps.Marker({position:{lat:-23.6525,lng:-46.862847},map:n}),i,r;t.addListener("click",function(){r.open(n,t)});i='<div id="content" style="width: 130px;"><div id="siteNotice"><\/div><span id="firstHeading" class="firstHeading" style="font-weight: bolder">'+controller.mapa.get().nome+'<\/span><div id="bodyContent" style="background-image: url('+controller.mapa.get().foto+')"><\/div><div><button style="width: 100%; border-radius: 8px; background-color: #0a7995; border-color: #086077;" onclick="launchnavigator.navigate([-23.647181,-46.847690]);">Abrir GPS<\/button><\/div><\/div>';r=new google.maps.InfoWindow({content:i})})},get:function(){return window.localStorage.mapa==null?null:JSON.parse(window.localStorage.mapa)},set:function(n){window.localStorage.mapa=JSON.stringify(n)}};controller.meuItem={init:function(n){n(controller.login.get(),function(){$("a.perdido1").html("Encontrado");$("#addItem").click(function(){creait.redirect("addItem")});$(".opt_grupo").click(function(){localStorage.setItem("grupo_id",$(this).attr("grupo_id"));creait.redirect("grupo_item")});$(".item_perdido").click(function(){$(".item_perdido").hasClass("perdido1")?creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=1",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=0;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}}):creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=0",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=1;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}})})})},get:function(){return window.localStorage.meuItem==null?null:JSON.parse(window.localStorage.meuItem)},set:function(n){window.localStorage.meuItem=JSON.stringify(n)}};controller.ong={init:function(n){n(controller.ong.get(),function(){$("#btn_pagar_ong").click(function(){creait.get("pagSeguro",null,function(n){PagSeguroDirectPayment.setSessionId(n);var t=$("#valor_ad").val()==""?$(".itens:checked").val():$("#valor_ad").val(),i="Doação para a ONG - "+controller.ong.get().nome+" no valor de : "+t+" reais";$("#titulo_doacao_ong").html(i);$("#valor_doacao_ong").val(t);PagSeguroDirectPayment.getPaymentMethods({amount:parseFloat(parseFloat(t).toFixed(2)),success:function(n){controller.boleto.set(n.paymentMethods.BOLETO.options);controller.credito.set(n.paymentMethods.CREDIT_CARD.options);controller.debito.set(n.paymentMethods.ONLINE_DEBIT.options);var r={valor_total:parseFloat(t),loja_id:controller.ong.get().id,endereco_bool:0,rua_entrega:"",numero_entrega:"",complemento_entrega:"",bairro_entrega:"",cep_entrega:"",cidade_entrega:"",estado_entrega:"",itens:[{id:35,nome:"Doação",qtde:1,descricao:i,valor:parseFloat(t)}]};controller.carrinho.get()!=null?(controller.carrinhoEspera.set(controller.carrinho.get),controller.carrinho.set(null),controller.carrinho.set(r)):controller.carrinho.set(r);localStorage.setItem("ong","1");creait.redirect("forma_pagamento");creait.loader(!1);creait.redirect("forma_pagamento")},error:function(){creait.loader(!1);myApp.alert("Ocorreu um erro tente novamente mais tarde!","")},complete:function(){}})})})})},get:function(){return window.localStorage.ong==null?null:JSON.parse(window.localStorage.ong)},set:function(n){window.localStorage.ong=JSON.stringify(n)}};controller.padrinho={init:function(n){creait.get("padrinho",null,function(t){n(t,function(){$("#addItemPadrinho").click(function(){creait.redirect("addItem","result=padrinho")})})})},get:function(){return window.localStorage.padrinho==null?null:JSON.parse(window.localStorage.padrinho)},set:function(n){window.localStorage.padrinho=JSON.stringify(n)}};controller.perdido={init:function(n){for(var i={itens:[]},t=0;t<controller.login.get().meusitens.length;t++)controller.login.get().meusitens[t].perdido==1&&i.itens.push(controller.login.get().meusitens[t]);n(i,function(){$(".item_perdido").click(function(){creait.post("perdido?item_id="+$(this).attr("item_id")+"&flag=1",null,function(n){for(var i,t=0;t<controller.login.get().meusitens.length;t++)if(controller.login.get().meusitens[t].id==n){i=controller.login.get();i.meusitens[t].perdido=0;controller.login.set(i);myApp.views[0].router.refreshPage();creait.loader(!1);break}})})})},get:function(){return window.localStorage.perdido==null?null:JSON.parse(window.localStorage.perdido)},set:function(n){window.localStorage.perdido=JSON.stringify(n)}};controller.perfil={init:function(n){n(controller.login.get(),function(){var n=myApp.picker({input:"#picker_estados",rotateEffect:!0,cols:[{values:["","AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"]}],toolbarTemplate:'<div class = "toolbar"><div class = "toolbar-inner"><div class = "left"><a href = "#" class = "link close-picker"><\/a><\/div><div class = "center"><\/div><div class = ""><a href = "#" class = "link close-picker">Done<\/a><\/div><\/div><\/div>',onClose:function(){},onOpen:function(){}});$("#picker_estados").click(function(){n.open()});$('input[type="file"]').each(function(){this.addEventListener("change",readFile3,!1)});$("#foto_usuario").click(function(){$("#pega_foto").click()});$$("#btn_sign_up").click(function(){$("#nome_input").toggleInputError($("#nome_input").val()=="","Informe o seu nome");$("#rg_input").toggleInputError($("#rg_input").val()=="","Informe o seu RG");$("#celular_input").toggleInputError($("#celular_input").val()=="","Informe o seu Celular");$("#dataN_input").toggleInputError($("#dataN_input").val()=="","Informe a sua Data de Nascimento");$("#email_input").toggleInputError($("#email_input").val()==""||!creait.isEmail($("#email_input").val()),"Email inválido");$("#password_input").toggleInputError($("#nome_input").val()==""||$("#password_input").val().length<6,"A senha deve ter no minimo 6 caracteres");$("#password_confirmar_input").toggleInputError($("#password_input").val()!=$("#password_confirmar_input").val(),"A confirmação da senha esta errada");$("#cpf_input").toggleInputError(validarCPF($("#cpf_input").val())==!1,"CPF Inválido");$("#cep_input").toggleInputError($("#cep_input").val()==!1,"Informe o seu CEP");$("#pais_input").toggleInputError($("#pais_input").val()==!1,"Informe o pais");$("#picker_estados").toggleInputError($("#picker_estados").val()==!1,"Selecione o estado");$("#cidade").toggleInputError($("#cidade").val()==!1,"Informe a cidade");$("#bairro_input").toggleInputError($("#bairro_input").val()==!1,"Informe o bairro");$("#rua_input").toggleInputError($("#rua_input").val()==!1,"Inform a rua");$("#numero_input").toggleInputError($("#numero_input").val()==!1,"Informe o numero");$("#password_sa").toggleInputError($("#password_sa").val()!=controller.login.get().senha,"Senha Incorreta");$("#password_sn").toggleInputError($("#password_sn").val()!=$("#password_csn").val(),"As senhas não coincidem");$("#pushC").val(pushToken);$("#platC").val(plataforma);$("#senha_antiga").val()!=""&&$("#password_sa").val()==controller.login.get().senha&&$("#password_sn").val()==$("#password_sn").val()&&$("#password_sn").val()!=""&&$("#senha").val($("#password_sn").val());$("formcadastro .has-error").length==0&&($("#complemento_input").val()==""?$("#complemento_input").val("nt"):$("#complemento_input").val(),creait.post("pessoas",myApp.formToJSON("formcadastro"),function(n){n.erro==null?(controller.login.set(n),creait.redirect("categoria")):(myApp.alert(n.erro,"Atenção"),creait.loader(!1))}))})})}};controller.produto={init:function(n){creait.get("item?responsavel_id="+localStorage.getItem("loja_id"),null,function(t){n(t,function(){})})},get:function(){return window.localStorage.produto==null?null:JSON.parse(window.localStorage.produto)},set:function(n){window.localStorage.produto=JSON.stringify(n)}};controller.qrcode={init:function(n){n({},function(){})},get:function(){return window.localStorage.mapa==null?null:JSON.parse(window.localStorage.mapa)},set:function(n){window.localStorage.mapa=JSON.stringify(n)}};controller.tipo={get:function(){return localStorage.getItem("tipo")==null?null:JSON.parse(localStorage.tipo)},set:function(n){localStorage.tipo=JSON.stringify(n)},private:null};controller.layout={get:function(){return localStorage.getItem("layout")==null?null:JSON.parse(localStorage.layout)},set:function(n){localStorage.layout=JSON.stringify(n)},private:null};controller.carrinhoEspera={get:function(){return localStorage.getItem("carrinhoEspera")==null?null:JSON.parse(localStorage.carrinhoEspera)},set:function(n){localStorage.carrinhoEspera=JSON.stringify(n)},private:null};controller.busca={init:function(n){n({},function(){function n(){var i=$("#pac-input").val(),n=i.replace(/\D/g,""),t;n!=""&&(t=/^[0-9]{8}$/,t.test(n)?($.ajax({type:"GET",url:"http://viacep.com.br/ws/"+n+"/json",dataType:"json",contentType:!1,processData:!1,success:function(n){$("#enderecos").text(n.logradouro+" - "+n.bairro+" - "+n.localidade);$("#numero").val(n.complemento);$("#pac-input").val(n.cep);$("#cidade").val(n.localidade)},error:function(n){$("html").html(n.responseText)}}),$("#modal_endereco").css("display","block")):myApp.alert("CEP invalido!","Atenção!"))}$$("#btn_search").click(function(){n()});$$("#pac-input").keyup(function(){this.value.length==8&&n()});$$("#btn_search_gps").click(function(){controller.busca.get()==null?navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){var t=[],i=n.coords.latitude,r=n.coords.longitude;t[0]=i;t[1]=r;controller.corfirmarEndereco.set(t);$.ajax({type:"GET",url:"http://maps.googleapis.com/maps/api/geocode/json?latlng="+i+","+r,dataType:"json",contentType:!1,processData:!1,success:function(n){$("#enderecos").text(n.results[0].address_components[1].short_name);$("#numero").val(n.results[0].address_components[0].long_name);$("#pac-input").val(n.results[0].address_components[7].long_name);$("#cidade").val(n.results[0].address_components[5].long_name)},error:function(){}});$("#modal_endereco").css("display","block")},function(){console.log("Erro ao encontrar a possição")}):alert("Parece que Geolocation, que é necessário para esta página, não está ativado em seu navegador. Use um navegador que o suporte."):creait.redirect("categoria")});$$("#btn_voltar").click(function(){$("#modal_endereco").css("display","none")});$$("#btn_confimar").click(function(){var n={};n.number=$("#numero").val();n.number==""?myApp.alert("Preencha o numero!","Atenção!",function(){}):(myApp.showPreloader("Buscando Cardápio"),$("#modal_endereco").css("display","none"),n.active=!0,n.cep=$("#pac-input").val(),n.street=$("#enderecos").html(),n.complement=$("#complemento").val(),n.city=$("#cidade").val(),n.lat=$("#lat").val(),n.lng=$("#lng").val(),controller.login.get()==null?controller.endereco.set(n):(n.pessoa_id=controller.login.get().id,creait.post("endereco",n,function(){})),creait.redirect("categoria"))})})},get:function(){return controller.busca.memory==null?window.localStorage.filiais==null?null:JSON.parse(window.localStorage.filiais):controller.busca.memory},set:function(n){try{window.localStorage.filiais=n==null?n:JSON.stringify(n);controller.busca.memory=null}catch(t){controller.busca.memory=n==null?n:n}},memory:null};controller.erroEndereco={init:function(n){n({},function(){})},get:function(){return window.localStorage.CEP==null?null:JSON.parse(window.localStorage.CEP)},set:function(n){window.localStorage.CEP=n==null?n:JSON.stringify(n)}};controller.index={init:function(n){creait.get("filiais",null,function(t){n(t,function(){controller.login.get()==null&&creait.redirect("categoria")})})}};controller.boleto={init:function(n){n({},function(){})},get:function(){return window.localStorage.boleto==null?null:JSON.parse(window.localStorage.boleto)},set:function(n){window.localStorage.boleto=n==null?n:JSON.stringify(n)}};controller.credito={init:function(n){n({},function(){})},get:function(){return window.localStorage.credito==null?null:JSON.parse(window.localStorage.credito)},set:function(n){window.localStorage.credito=n==null?n:JSON.stringify(n)}};controller.debito={init:function(n){n({},function(){})},get:function(){return window.localStorage.debito==null?null:JSON.parse(window.localStorage.debito)},set:function(n){window.localStorage.debito=n==null?n:JSON.stringify(n)}};$(window).resize(function(){window.resizeTo(425,660)});